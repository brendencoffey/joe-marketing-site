[build]
  publish = "."
  functions = "netlify/functions"

[functions]
  node_bundler = "esbuild"

[[redirects]]
  from = "/locations/:state/:city/:slug/"
  to = "/.netlify/functions/location-page?state=:state&city=:city&slug=:slug"
  status = 200
  force = true

[[redirects]]
  from = "/locations/:state/:city/:slug"
  to = "/locations/:state/:city/:slug/"
  status = 301

[[redirects]]
  from = "/locations/:state/:city/"
  to = "/.netlify/functions/city-page?state=:state&city=:city"
  status = 200
  force = true

[[redirects]]
  from = "/locations/:state/:city"
  to = "/locations/:state/:city/"
  status = 301

[[redirects]]
  from = "/api/claim"
  to = "/.netlify/functions/claim-listing"
  status = 200

[[redirects]]
  from = "/api/track"
  to = "/.netlify/functions/track-activity"
  status = 200
