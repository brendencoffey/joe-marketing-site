<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Content Studio | joe</title>
  <link rel="icon" type="image/png" href="/images/logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Newsreader:opsz,wght@6..72,400;6..72,500;6..72,600&display=swap" rel="stylesheet">
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <style>
    :root {
      --joe-black: #171717;
      --joe-white: #ffffff;
      --joe-cream: #fafaf9;
      --joe-gray-50: #f9fafb;
      --joe-gray-100: #f3f4f6;
      --joe-gray-200: #e5e7eb;
      --joe-gray-300: #d1d5db;
      --joe-gray-400: #9ca3af;
      --joe-gray-500: #6b7280;
      --joe-gray-600: #4b5563;
      --joe-gray-700: #374151;
      --joe-gray-800: #1f2937;
      --joe-gray-900: #111827;
      --joe-red: #dc2626;
      --sidebar-width: 240px;
    }
    
    * { font-family: 'Inter', -apple-system, sans-serif !important; box-sizing: border-box; }
    html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; background: var(--joe-cream); -webkit-tap-highlight-color: transparent; }
    
    /* Loading Screen */
    #loading-screen { position: fixed; inset: 0; background: var(--joe-white); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 99999; transition: opacity 0.3s; }
    #loading-screen.hidden { opacity: 0; pointer-events: none; }
    #loading-screen img { height: 40px; margin-bottom: 24px; }
    .loader { width: 32px; height: 32px; border: 3px solid var(--joe-gray-200); border-top-color: var(--joe-black); border-radius: 50%; animation: spin 0.8s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    #loading-screen p { margin-top: 16px; color: var(--joe-gray-500); font-size: 14px; }

    /* App Frame */
    #nc-root { height: 100vh !important; display: flex !important; flex-direction: column !important; }
    
    /* Header */
    [class*="AppHeader"], header { background: var(--joe-black) !important; height: 56px !important; min-height: 56px !important; flex-shrink: 0 !important; display: flex !important; align-items: center !important; padding: 0 16px !important; z-index: 1000 !important; }
    [class*="AppHeader"] *, header * { color: var(--joe-white) !important; }
    [class*="AppHeader"] button, header button { background: var(--joe-gray-800) !important; color: var(--joe-white) !important; border: 1px solid var(--joe-gray-700) !important; border-radius: 6px !important; padding: 8px 14px !important; font-size: 13px !important; font-weight: 500 !important; min-height: 40px !important; }
    [class*="AppHeader"] button:hover, header button:hover { background: var(--joe-gray-700) !important; }
    [class*="AppHeader"] img, header img { filter: invert(1) !important; height: 24px !important; }

    /* Main Container */
    [class*="AppMainContainer"], [class*="App"] > div:not([class*="AppHeader"]) { display: flex !important; flex: 1 !important; overflow: hidden !important; height: calc(100vh - 56px) !important; }
    
    /* Sidebar */
    [class*="Sidebar"], [class*="CollectionPane"], aside { width: var(--sidebar-width) !important; min-width: var(--sidebar-width) !important; max-width: var(--sidebar-width) !important; background: var(--joe-white) !important; border-right: 1px solid var(--joe-gray-200) !important; overflow-y: auto !important; flex-shrink: 0 !important; height: 100% !important; -webkit-overflow-scrolling: touch !important; }
    [class*="Sidebar"] input, aside input[type="text"] { width: calc(100% - 24px) !important; margin: 12px !important; padding: 10px 14px !important; border: 1px solid var(--joe-gray-200) !important; border-radius: 8px !important; font-size: 16px !important; background: var(--joe-gray-50) !important; min-height: 44px !important; }
    [class*="Sidebar"] input:focus { border-color: var(--joe-black) !important; background: var(--joe-white) !important; outline: none !important; box-shadow: 0 0 0 2px rgba(0,0,0,0.1) !important; }
    [class*="SidebarHeading"], aside h2, [class*="Sidebar"] h2 { font-size: 11px !important; font-weight: 600 !important; text-transform: uppercase !important; letter-spacing: 0.5px !important; color: var(--joe-gray-400) !important; padding: 16px 16px 8px !important; margin: 0 !important; }
    [class*="SidebarLink"], [class*="Sidebar"] a, aside a { display: flex !important; align-items: center !important; gap: 10px !important; padding: 12px 14px !important; margin: 2px 8px !important; border-radius: 8px !important; font-size: 14px !important; font-weight: 500 !important; color: var(--joe-gray-600) !important; text-decoration: none !important; cursor: pointer !important; min-height: 44px !important; }
    [class*="SidebarLink"]:hover, [class*="Sidebar"] a:hover { background: var(--joe-gray-100) !important; color: var(--joe-gray-900) !important; }
    [class*="SidebarLink"][class*="active"], [class*="Sidebar"] a[aria-current="page"], [class*="Sidebar"] a.active { background: var(--joe-black) !important; color: var(--joe-white) !important; }
    [class*="Sidebar"] svg, aside svg { width: 20px !important; height: 20px !important; flex-shrink: 0 !important; opacity: 0.7 !important; }

    /* Main Content */
    [class*="EntryListing"], [class*="MainView"], main { flex: 1 !important; background: var(--joe-cream) !important; overflow-y: auto !important; padding: 24px !important; min-width: 0 !important; -webkit-overflow-scrolling: touch !important; }
    [class*="CollectionTop"], [class*="ViewHeader"] { display: flex !important; align-items: center !important; justify-content: space-between !important; flex-wrap: wrap !important; gap: 16px !important; margin-bottom: 20px !important; }
    [class*="CollectionHeader"] h1, main h1 { font-size: 24px !important; font-weight: 700 !important; color: var(--joe-gray-900) !important; margin: 0 !important; }
    
    /* Create Button */
    a[href*="/new"], [class*="CreateNewEntryButton"] { background: var(--joe-black) !important; color: var(--joe-white) !important; border: none !important; border-radius: 8px !important; padding: 12px 18px !important; font-weight: 600 !important; font-size: 14px !important; text-decoration: none !important; display: inline-flex !important; align-items: center !important; gap: 8px !important; white-space: nowrap !important; min-height: 44px !important; }
    a[href*="/new"]:hover { background: var(--joe-gray-800) !important; }

    /* Entry Cards */
    [class*="ListCard"], [class*="EntryCard"], [class*="EntryListing"] li { background: var(--joe-white) !important; border: 1px solid var(--joe-gray-200) !important; border-radius: 12px !important; padding: 16px 18px !important; margin-bottom: 10px !important; list-style: none !important; min-height: 60px !important; }
    [class*="ListCard"]:hover, [class*="EntryCard"]:hover { border-color: var(--joe-gray-300) !important; box-shadow: 0 2px 8px rgba(0,0,0,0.06) !important; }
    [class*="ListCard"] a, [class*="EntryCard"] a { text-decoration: none !important; color: inherit !important; }
    [class*="ListCard"] h2, [class*="EntryCard"] h2 { font-size: 15px !important; font-weight: 600 !important; color: var(--joe-gray-900) !important; margin: 0 0 4px 0 !important; }
    [class*="ListCard"] span, [class*="ListCard"] time { font-size: 13px !important; color: var(--joe-gray-500) !important; }

    /* Editor */
    [class*="EditorContainer"], [class*="ControlPane"], [class*="EditorInterface"] { display: flex !important; flex: 1 !important; overflow: hidden !important; background: var(--joe-white) !important; }
    [class*="EditorToolbar"], [class*="EditorControlBar"] { background: var(--joe-white) !important; border-bottom: 1px solid var(--joe-gray-200) !important; padding: 12px 20px !important; display: flex !important; align-items: center !important; justify-content: space-between !important; gap: 12px !important; flex-wrap: wrap !important; min-height: 60px !important; }
    [class*="ControlPaneContainer"], [class*="EditorContent"] { flex: 1 !important; overflow-y: auto !important; padding: 24px !important; -webkit-overflow-scrolling: touch !important; }
    [class*="Field"] { margin-bottom: 24px !important; }
    label, [class*="FieldLabel"] { font-size: 13px !important; font-weight: 600 !important; color: var(--joe-gray-700) !important; margin-bottom: 8px !important; display: block !important; }
    [class*="FieldHint"], label + small { font-size: 12px !important; color: var(--joe-gray-500) !important; margin-top: 6px !important; display: block !important; }
    
    /* Inputs - Mobile friendly sizes */
    input[type="text"], input[type="url"], input[type="email"], input[type="number"], input[type="date"], input[type="datetime-local"], textarea, select { width: 100% !important; border: 1px solid var(--joe-gray-300) !important; border-radius: 8px !important; padding: 12px 14px !important; font-size: 16px !important; color: var(--joe-gray-900) !important; background: var(--joe-white) !important; min-height: 48px !important; -webkit-appearance: none !important; }
    input:focus, textarea:focus, select:focus { border-color: var(--joe-black) !important; box-shadow: 0 0 0 3px rgba(0,0,0,0.08) !important; outline: none !important; }
    textarea { min-height: 120px !important; resize: vertical !important; }
    select { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E") !important; background-repeat: no-repeat !important; background-position: right 14px center !important; padding-right: 40px !important; }
    
    /* Markdown Editor */
    [class*="MarkdownControl"], [class*="RichTextEditor"] { border: 1px solid var(--joe-gray-300) !important; border-radius: 10px !important; overflow: hidden !important; background: var(--joe-white) !important; }
    [class*="MarkdownControl"] [class*="Toolbar"] { background: var(--joe-gray-50) !important; border-bottom: 1px solid var(--joe-gray-200) !important; padding: 8px !important; display: flex !important; flex-wrap: wrap !important; gap: 4px !important; }
    [class*="MarkdownControl"] button { background: transparent !important; border: none !important; padding: 8px 10px !important; border-radius: 6px !important; color: var(--joe-gray-600) !important; min-width: 36px !important; min-height: 36px !important; }
    [class*="MarkdownControl"] button:hover, [class*="MarkdownControl"] button:active { background: var(--joe-gray-200) !important; color: var(--joe-gray-900) !important; }
    [class*="MarkdownControl"] textarea, [class*="RawEditor"] textarea { min-height: 300px !important; font-size: 16px !important; line-height: 1.7 !important; padding: 16px !important; }

    /* Preview Pane */
    [class*="PreviewPane"], [class*="Preview"] { flex: 1 !important; background: var(--joe-white) !important; border-left: 1px solid var(--joe-gray-200) !important; overflow-y: auto !important; padding: 0 !important; -webkit-overflow-scrolling: touch !important; }

    /* Buttons */
    button { cursor: pointer !important; font-weight: 500 !important; min-height: 44px !important; }
    button[class*="primary"], button[class*="Publish"], [class*="PublishButton"], button[type="submit"] { background: var(--joe-black) !important; color: var(--joe-white) !important; border: none !important; border-radius: 8px !important; padding: 12px 20px !important; font-weight: 600 !important; font-size: 14px !important; }
    button[class*="primary"]:hover, [class*="PublishButton"]:hover { background: var(--joe-gray-800) !important; }
    button[class*="delete"], [class*="DeleteButton"] { background: var(--joe-red) !important; color: var(--joe-white) !important; border: none !important; }

    /* Dropdowns */
    [class*="Dropdown"], [class*="Menu"], [class*="Popover"] { background: var(--joe-white) !important; border: 1px solid var(--joe-gray-200) !important; border-radius: 10px !important; box-shadow: 0 10px 25px rgba(0,0,0,0.15) !important; padding: 6px !important; z-index: 10000 !important; }
    [class*="Dropdown"] button, [class*="Menu"] button, [class*="MenuItem"] { padding: 12px 16px !important; font-size: 14px !important; width: 100% !important; text-align: left !important; border: none !important; background: transparent !important; color: var(--joe-gray-700) !important; border-radius: 8px !important; min-height: 44px !important; }
    [class*="Dropdown"] button:hover, [class*="MenuItem"]:hover { background: var(--joe-gray-100) !important; }
    
    /* Modal */
    [class*="Modal"], [role="dialog"] > div { border-radius: 16px !important; box-shadow: 0 25px 50px rgba(0,0,0,0.25) !important; max-height: 90vh !important; overflow-y: auto !important; }
    [class*="ModalOverlay"] { background: rgba(0,0,0,0.5) !important; backdrop-filter: blur(4px) !important; }
    
    /* Toggle */
    input[type="checkbox"] { width: 20px !important; height: 20px !important; accent-color: var(--joe-black) !important; }
    [class*="Toggle"], [class*="Switch"] { background: var(--joe-gray-300) !important; border-radius: 100px !important; min-width: 50px !important; min-height: 28px !important; }
    [class*="Toggle"][class*="checked"], [class*="Toggle"][aria-checked="true"] { background: var(--joe-black) !important; }
    
    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--joe-gray-300); border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--joe-gray-400); }

    /* Mobile */
    @media (max-width: 900px) {
      [class*="EditorContainer"], [class*="EditorInterface"] { flex-direction: column !important; }
      [class*="PreviewPane"], [class*="Preview"] { border-left: none !important; border-top: 1px solid var(--joe-gray-200) !important; max-height: 50vh !important; min-height: 200px !important; }
    }
    @media (max-width: 768px) {
      :root { --sidebar-width: 220px; }
      [class*="CollectionTop"], [class*="ViewHeader"] { flex-direction: column !important; align-items: flex-start !important; }
      [class*="EntryListing"], main, [class*="ControlPaneContainer"], [class*="EditorContent"] { padding: 16px !important; }
      [class*="EditorToolbar"] { padding: 10px 16px !important; }
    }
    @media (max-width: 600px) {
      :root { --sidebar-width: 64px; }
      [class*="Sidebar"], aside { width: 64px !important; min-width: 64px !important; max-width: 64px !important; }
      [class*="Sidebar"] input, [class*="SidebarHeading"], [class*="Sidebar"] h2, [class*="SidebarLink"] span:not(:first-child), [class*="Sidebar"] a span:not(:first-child) { display: none !important; }
      [class*="SidebarLink"], [class*="Sidebar"] a { justify-content: center !important; padding: 14px !important; margin: 2px 6px !important; }
      [class*="SidebarLink"] svg, [class*="Sidebar"] svg { width: 24px !important; height: 24px !important; }
      [class*="AppHeader"], header { padding: 0 12px !important; }
      [class*="CollectionHeader"] h1, main h1 { font-size: 20px !important; }
      a[href*="/new"], [class*="CreateNewEntryButton"] { padding: 10px 14px !important; font-size: 13px !important; width: 100% !important; justify-content: center !important; }
      [class*="EditorToolbar"] { flex-wrap: nowrap !important; overflow-x: auto !important; -webkit-overflow-scrolling: touch !important; }
      [class*="MarkdownControl"] [class*="Toolbar"] { overflow-x: auto !important; flex-wrap: nowrap !important; -webkit-overflow-scrolling: touch !important; }
    }
  </style>
</head>
<body>
  <div id="loading-screen">
    <img src="/images/logo.png" alt="joe" onerror="this.src='https://4591743.fs1.hubspotusercontent-na1.net/hubfs/4591743/Black.png'">
    <div class="loader"></div>
    <p>Loading Content Studio...</p>
  </div>

  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script>
    // Hide loading screen
    setTimeout(function() {
      var loader = document.getElementById('loading-screen');
      if (loader) loader.classList.add('hidden');
    }, 1500);
    
    // Handle Netlify Identity
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on('init', function(user) {
        if (!user) {
          window.netlifyIdentity.on('login', function() {
            document.location.href = '/cms/';
          });
        }
      });
    }

    // =============================================
    // CUSTOM PREVIEW TEMPLATES
    // Match joe.coffee blog styling
    // =============================================
    
    var defined = window.CMS || {};
    
    // Wait for CMS to load
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof CMS === 'undefined') return;
      
      // Blog Post Preview Template
      CMS.registerPreviewTemplate('posts', createClass({
        render: function() {
          var entry = this.props.entry;
          var data = entry.get('data').toJS();
          
          return h('div', { style: { fontFamily: "'Inter', sans-serif", background: '#fafaf9', minHeight: '100%' } },
            // Hero
            h('div', { style: { 
              background: data.featured_image ? 'url(' + this.props.getAsset(data.featured_image).toString() + ') center/cover' : '#171717',
              height: '300px',
              display: 'flex',
              alignItems: 'flex-end',
              padding: '40px',
              position: 'relative'
            }},
              h('div', { style: { position: 'absolute', inset: 0, background: 'linear-gradient(transparent, rgba(0,0,0,0.7))' }}),
              h('div', { style: { position: 'relative', color: '#fff', maxWidth: '800px' }},
                data.category && h('span', { style: { 
                  background: '#171717', 
                  padding: '4px 12px', 
                  borderRadius: '100px', 
                  fontSize: '12px',
                  fontWeight: '600',
                  textTransform: 'uppercase',
                  letterSpacing: '0.5px',
                  marginBottom: '12px',
                  display: 'inline-block'
                }}, data.category.replace(/-/g, ' ')),
                h('h1', { style: { 
                  fontFamily: "'Newsreader', Georgia, serif",
                  fontSize: '2.5rem', 
                  fontWeight: '400',
                  margin: '12px 0 0 0',
                  lineHeight: '1.2'
                }}, data.title || 'Untitled Post')
              )
            ),
            
            // Content
            h('div', { style: { maxWidth: '720px', margin: '0 auto', padding: '40px 24px' }},
              // Meta
              h('div', { style: { 
                display: 'flex', 
                alignItems: 'center', 
                gap: '16px',
                paddingBottom: '24px',
                borderBottom: '1px solid #e5e7eb',
                marginBottom: '32px',
                color: '#6b7280',
                fontSize: '14px'
              }},
                data.author && h('span', {}, 'By ', h('strong', { style: { color: '#171717' }}, data.author)),
                data.date && h('span', {}, new Date(data.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }))
              ),
              
              // Excerpt
              data.excerpt && h('p', { style: { 
                fontSize: '1.25rem', 
                color: '#374151',
                lineHeight: '1.7',
                marginBottom: '32px',
                fontStyle: 'italic'
              }}, data.excerpt),
              
              // Body
              h('div', { 
                style: { 
                  fontSize: '1.0625rem', 
                  lineHeight: '1.8',
                  color: '#1f2937'
                },
                dangerouslySetInnerHTML: { __html: this.props.widgetFor('body') }
              })
            )
          );
        }
      }));
      
      // Testimonial Preview Template
      CMS.registerPreviewTemplate('testimonials', createClass({
        render: function() {
          var entry = this.props.entry;
          var data = entry.get('data').toJS();
          
          return h('div', { style: { fontFamily: "'Inter', sans-serif", background: '#fafaf9', minHeight: '100%', padding: '40px 24px' }},
            h('div', { style: { maxWidth: '800px', margin: '0 auto' }},
              // Header
              h('div', { style: { textAlign: 'center', marginBottom: '40px' }},
                h('span', { style: { 
                  background: '#dcfce7', 
                  color: '#16a34a',
                  padding: '4px 12px', 
                  borderRadius: '100px', 
                  fontSize: '12px',
                  fontWeight: '600',
                  textTransform: 'uppercase'
                }}, 'Success Story'),
                h('h1', { style: { 
                  fontFamily: "'Newsreader', Georgia, serif",
                  fontSize: '2.25rem', 
                  fontWeight: '400',
                  margin: '16px 0',
                  color: '#171717'
                }}, data.title || 'Untitled')
              ),
              
              // Quote Card
              h('div', { style: { 
                background: '#fff', 
                borderRadius: '16px', 
                padding: '32px',
                boxShadow: '0 1px 3px rgba(0,0,0,0.1)',
                marginBottom: '32px'
              }},
                data.quote && h('blockquote', { style: { 
                  fontSize: '1.5rem',
                  fontStyle: 'italic',
                  color: '#374151',
                  lineHeight: '1.6',
                  margin: '0 0 24px 0',
                  paddingLeft: '24px',
                  borderLeft: '4px solid #171717'
                }}, '"', data.quote, '"'),
                
                h('div', { style: { display: 'flex', alignItems: 'center', gap: '16px' }},
                  data.photo && h('img', { 
                    src: this.props.getAsset(data.photo).toString(),
                    style: { width: '56px', height: '56px', borderRadius: '50%', objectFit: 'cover' }
                  }),
                  h('div', {},
                    h('div', { style: { fontWeight: '600', color: '#171717' }}, data.shop_name || 'Shop Name'),
                    data.location && h('div', { style: { color: '#6b7280', fontSize: '14px' }}, data.location)
                  )
                )
              ),
              
              // Body
              h('div', { 
                style: { fontSize: '1.0625rem', lineHeight: '1.8', color: '#1f2937' },
                dangerouslySetInnerHTML: { __html: this.props.widgetFor('body') }
              })
            )
          );
        }
      }));
      
      // Campaign Preview Template
      CMS.registerPreviewTemplate('campaigns', createClass({
        render: function() {
          var entry = this.props.entry;
          var data = entry.get('data').toJS();
          
          return h('div', { style: { fontFamily: "'Inter', sans-serif", background: '#fafaf9', minHeight: '100%' }},
            // Hero
            h('div', { style: { 
              background: data.hero_image ? 'url(' + this.props.getAsset(data.hero_image).toString() + ') center/cover' : '#171717',
              minHeight: '400px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              padding: '60px 24px',
              textAlign: 'center',
              position: 'relative'
            }},
              h('div', { style: { position: 'absolute', inset: 0, background: 'rgba(0,0,0,0.5)' }}),
              h('div', { style: { position: 'relative', color: '#fff', maxWidth: '700px' }},
                h('h1', { style: { 
                  fontFamily: "'Newsreader', Georgia, serif",
                  fontSize: '3rem', 
                  fontWeight: '400',
                  margin: '0 0 16px 0',
                  lineHeight: '1.1'
                }}, data.headline || 'Campaign Headline'),
                data.subheadline && h('p', { style: { 
                  fontSize: '1.25rem', 
                  opacity: 0.9,
                  margin: '0 0 32px 0'
                }}, data.subheadline),
                h('a', { 
                  href: data.cta_link || '#',
                  style: { 
                    display: 'inline-block',
                    background: '#fff',
                    color: '#171717',
                    padding: '14px 32px',
                    borderRadius: '8px',
                    fontWeight: '600',
                    textDecoration: 'none',
                    fontSize: '16px'
                  }
                }, data.cta_text || 'Get Started')
              )
            ),
            
            // Promo Code
            data.promo_code && h('div', { style: { 
              background: '#171717', 
              color: '#fff',
              padding: '20px',
              textAlign: 'center'
            }},
              h('span', { style: { opacity: 0.8 }}, 'Use code '),
              h('span', { style: { 
                background: '#fff',
                color: '#171717',
                padding: '4px 12px',
                borderRadius: '4px',
                fontWeight: '700',
                fontFamily: 'monospace',
                fontSize: '1.1em',
                margin: '0 8px'
              }}, data.promo_code),
              data.promo_value && h('span', { style: { opacity: 0.8 }}, ' for ', data.promo_value)
            ),
            
            // Body
            h('div', { style: { maxWidth: '720px', margin: '0 auto', padding: '40px 24px' }},
              h('div', { 
                style: { fontSize: '1.0625rem', lineHeight: '1.8', color: '#1f2937' },
                dangerouslySetInnerHTML: { __html: this.props.widgetFor('body') }
              })
            )
          );
        }
      }));
      
      // Partner Preview Template  
      CMS.registerPreviewTemplate('partners', createClass({
        render: function() {
          var entry = this.props.entry;
          var data = entry.get('data').toJS();
          
          return h('div', { style: { fontFamily: "'Inter', sans-serif", background: '#fafaf9', minHeight: '100%' }},
            // Hero
            h('div', { style: { 
              background: data.hero_image ? 'url(' + this.props.getAsset(data.hero_image).toString() + ') center/cover' : 'linear-gradient(135deg, #171717 0%, #374151 100%)',
              minHeight: '350px',
              display: 'flex',
              alignItems: 'center',
              padding: '60px 24px',
              position: 'relative'
            }},
              h('div', { style: { position: 'absolute', inset: 0, background: 'rgba(0,0,0,0.4)' }}),
              h('div', { style: { position: 'relative', color: '#fff', maxWidth: '800px', margin: '0 auto', display: 'flex', alignItems: 'center', gap: '32px' }},
                data.logo && h('img', { 
                  src: this.props.getAsset(data.logo).toString(),
                  style: { height: '80px', background: '#fff', padding: '12px', borderRadius: '12px' }
                }),
                h('div', {},
                  h('div', { style: { 
                    fontSize: '12px',
                    textTransform: 'uppercase',
                    letterSpacing: '1px',
                    opacity: 0.8,
                    marginBottom: '8px'
                  }}, 'joe Ã— ', data.title),
                  h('h1', { style: { 
                    fontFamily: "'Newsreader', Georgia, serif",
                    fontSize: '2.5rem', 
                    fontWeight: '400',
                    margin: '0'
                  }}, data.headline || 'Partner with joe')
                )
              )
            ),
            
            // Content
            h('div', { style: { maxWidth: '720px', margin: '0 auto', padding: '40px 24px' }},
              data.description && h('p', { style: { 
                fontSize: '1.25rem',
                color: '#374151',
                lineHeight: '1.7',
                marginBottom: '32px'
              }}, data.description),
              
              data.promo_code && h('div', { style: { 
                background: '#f0fdf4',
                border: '1px solid #bbf7d0',
                borderRadius: '12px',
                padding: '20px',
                marginBottom: '32px',
                textAlign: 'center'
              }},
                h('div', { style: { color: '#16a34a', fontWeight: '600', marginBottom: '4px' }}, 'Exclusive Offer'),
                h('div', { style: { fontSize: '1.5rem', fontWeight: '700', fontFamily: 'monospace' }}, data.promo_code)
              ),
              
              h('div', { 
                style: { fontSize: '1.0625rem', lineHeight: '1.8', color: '#1f2937' },
                dangerouslySetInnerHTML: { __html: this.props.widgetFor('body') }
              })
            )
          );
        }
      }));
      
      // Author Preview Template
      CMS.registerPreviewTemplate('authors', createClass({
        render: function() {
          var entry = this.props.entry;
          var data = entry.get('data').toJS();
          
          return h('div', { style: { fontFamily: "'Inter', sans-serif", background: '#fafaf9', minHeight: '100%', padding: '60px 24px' }},
            h('div', { style: { maxWidth: '600px', margin: '0 auto', textAlign: 'center' }},
              data.photo && h('img', { 
                src: this.props.getAsset(data.photo).toString(),
                style: { width: '120px', height: '120px', borderRadius: '50%', objectFit: 'cover', marginBottom: '24px' }
              }),
              h('h1', { style: { 
                fontFamily: "'Newsreader', Georgia, serif",
                fontSize: '2rem',
                fontWeight: '400',
                margin: '0 0 8px 0',
                color: '#171717'
              }}, data.title || 'Author Name'),
              data.role && h('div', { style: { color: '#6b7280', marginBottom: '24px' }}, data.role),
              data.bio && h('p', { style: { 
                fontSize: '1.0625rem',
                lineHeight: '1.7',
                color: '#374151'
              }}, data.bio)
            )
          );
        }
      }));
      
    });
  </script>
</body>
</html>
