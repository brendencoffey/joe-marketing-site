<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog Admin Dashboard | joe Coffee</title>
  <link rel="icon" type="image/png" href="https://4591743.fs1.hubspotusercontent-na1.net/hubfs/4591743/Black.png">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['DM Sans', 'sans-serif'] },
          colors: {
            joe: { red: '#E53935', dark: '#1a1a1a', cream: '#FDF8F3' }
          }
        }
      }
    }
  </script>
  
  <style>
    body { font-family: 'DM Sans', sans-serif; }
    .card-checkbox { opacity: 0; transition: opacity 0.2s; }
    .post-card:hover .card-checkbox, .card-checkbox:checked, .select-mode .card-checkbox { opacity: 1; }
    .action-bar { transform: translateY(100%); transition: transform 0.3s ease; }
    .action-bar.visible { transform: translateY(0); }
    .toast { animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s; }
    @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
    @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
    .dropdown-menu { display: none; }
    .dropdown:hover .dropdown-menu { display: block; }
  </style>
</head>
<body class="min-h-screen bg-gray-50">
  
  <!-- Header -->
  <header class="bg-joe-dark text-white sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <img src="https://4591743.fs1.hubspotusercontent-na1.net/hubfs/4591743/Black.png" alt="joe" class="h-8 invert">
        <h1 class="text-xl font-semibold">Blog Admin</h1>
      </div>
      <div class="flex items-center gap-4">
        <a href="/admin/" class="text-sm text-gray-300 hover:text-white">← Back to CMS</a>
        <a href="/" target="_blank" class="text-sm text-gray-300 hover:text-white">View Site →</a>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-6 py-8">
    
    <!-- Stats Bar -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
      <div class="bg-white rounded-xl p-4 shadow-sm">
        <p class="text-gray-500 text-sm">Total Posts</p>
        <p class="text-2xl font-bold" id="stat-total">-</p>
      </div>
      <div class="bg-white rounded-xl p-4 shadow-sm">
        <p class="text-gray-500 text-sm">Published</p>
        <p class="text-2xl font-bold text-green-600" id="stat-published">-</p>
      </div>
      <div class="bg-white rounded-xl p-4 shadow-sm">
        <p class="text-gray-500 text-sm">Drafts</p>
        <p class="text-2xl font-bold text-amber-600" id="stat-drafts">-</p>
      </div>
      <div class="bg-white rounded-xl p-4 shadow-sm">
        <p class="text-gray-500 text-sm">Testimonials</p>
        <p class="text-2xl font-bold text-blue-600" id="stat-testimonials">-</p>
      </div>
    </div>

    <!-- Toolbar -->
    <div class="bg-white rounded-xl shadow-sm p-4 mb-6">
      <div class="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
        
        <!-- Search -->
        <div class="relative flex-1 max-w-md">
          <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
          <input 
            type="search" 
            id="search-input"
            placeholder="Search posts by title, content, tags..." 
            class="w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-joe-red focus:border-transparent"
          >
        </div>
        
        <!-- Filters -->
        <div class="flex items-center gap-3">
          <select id="filter-status" class="px-3 py-2.5 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-joe-red">
            <option value="all">All Status</option>
            <option value="published">Published</option>
            <option value="draft">Drafts</option>
          </select>
          
          <select id="filter-category" class="px-3 py-2.5 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-joe-red">
            <option value="all">All Categories</option>
            <option value="industry-trends">Industry Trends</option>
            <option value="build-in-public">Build In Public</option>
            <option value="coffee-shop-owner">Coffee Shop Owner</option>
            <option value="loyalty-marketing">Loyalty Marketing</option>
            <option value="mobile-ordering">Mobile Ordering</option>
            <option value="community">Community</option>
            <option value="barista">Barista</option>
          </select>
          
          <select id="filter-type" class="px-3 py-2.5 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-joe-red">
            <option value="posts">Blog Posts</option>
            <option value="testimonials">Testimonials</option>
          </select>
        </div>
        
        <!-- Actions -->
        <div class="flex items-center gap-2">
          <button id="select-mode-btn" class="px-4 py-2.5 border border-gray-200 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors flex items-center gap-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
            </svg>
            Select
          </button>
          
          <a href="/admin/#/collections/posts/new" class="px-4 py-2.5 bg-joe-red text-white rounded-lg text-sm font-medium hover:bg-red-600 transition-colors flex items-center gap-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
            </svg>
            New Post
          </a>
        </div>
      </div>
    </div>

    <!-- Posts Grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="posts-grid">
      <!-- Posts loaded dynamically -->
    </div>
    
    <!-- Empty State -->
    <div id="empty-state" class="hidden text-center py-16">
      <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
      </svg>
      <p class="text-gray-500">No posts found matching your filters</p>
    </div>
    
    <!-- Loading State -->
    <div id="loading-state" class="text-center py-16">
      <div class="w-8 h-8 border-4 border-joe-red border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
      <p class="text-gray-500">Loading posts...</p>
    </div>

  </main>

  <!-- Bulk Action Bar -->
  <div id="action-bar" class="action-bar fixed bottom-0 left-0 right-0 bg-joe-dark text-white py-4 px-6 z-50">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
      <div class="flex items-center gap-4">
        <span class="font-medium"><span id="selected-count">0</span> selected</span>
        <button id="select-all-btn" class="text-sm text-gray-300 hover:text-white underline">Select all visible</button>
        <button id="clear-selection-btn" class="text-sm text-gray-300 hover:text-white underline">Clear</button>
      </div>
      <div class="flex items-center gap-3">
        <button id="bulk-publish-btn" class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm font-medium transition-colors">
          Publish Selected
        </button>
        <button id="bulk-draft-btn" class="px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded-lg text-sm font-medium transition-colors">
          Move to Draft
        </button>
        <button id="bulk-delete-btn" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm font-medium transition-colors flex items-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
          Delete
        </button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="fixed top-4 right-4 z-50 flex flex-col gap-2"></div>

  <!-- Post Card Template -->
  <template id="post-card-template">
    <div class="post-card bg-white rounded-xl shadow-sm overflow-hidden group" data-slug="">
      <!-- Checkbox -->
      <div class="absolute top-3 left-3 z-10">
        <input type="checkbox" class="card-checkbox w-5 h-5 rounded border-gray-300 text-joe-red focus:ring-joe-red cursor-pointer">
      </div>
      
      <!-- Image -->
      <div class="aspect-video bg-gray-100 relative overflow-hidden">
        <img src="" alt="" class="w-full h-full object-cover">
        <div class="absolute top-3 right-3 flex gap-1">
          <span class="status-badge px-2 py-1 rounded-full text-xs font-medium"></span>
        </div>
      </div>
      
      <!-- Content -->
      <div class="p-4">
        <div class="flex items-center gap-2 mb-2">
          <span class="category-badge px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-600"></span>
          <span class="text-gray-400 text-xs post-date"></span>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2 post-title"></h3>
        <p class="text-gray-500 text-sm line-clamp-2 post-excerpt"></p>
        
        <!-- Tags -->
        <div class="flex flex-wrap gap-1 mt-3 post-tags"></div>
      </div>
      
      <!-- Actions -->
      <div class="px-4 py-3 bg-gray-50 border-t border-gray-100 flex items-center justify-between">
        <div class="flex items-center gap-2">
          <a href="" class="action-edit px-3 py-1.5 text-sm font-medium text-joe-red hover:bg-red-50 rounded transition-colors">
            Edit
          </a>
          <button class="action-duplicate px-3 py-1.5 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded transition-colors">
            Duplicate
          </button>
        </div>
        <button class="action-delete p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
          </svg>
        </button>
      </div>
    </div>
  </template>

  <script>
    // Admin Dashboard Manager
    const AdminDashboard = {
      posts: [],
      testimonials: [],
      filteredItems: [],
      selectedItems: new Set(),
      selectMode: false,
      currentType: 'posts',
      
      // GitHub API config (read-only, for fetching)
      repoOwner: 'brendencoffey',
      repoName: 'joe-marketing-site',
      
      async init() {
        this.bindEvents();
        await this.loadContent();
        this.render();
      },
      
      async loadContent() {
        document.getElementById('loading-state').classList.remove('hidden');
        document.getElementById('posts-grid').innerHTML = '';
        
        try {
          // Fetch posts
          const postsResponse = await fetch(`https://api.github.com/repos/${this.repoOwner}/${this.repoName}/contents/blog/posts`);
          if (postsResponse.ok) {
            const postsFiles = await postsResponse.json();
            this.posts = await this.parseMarkdownFiles(postsFiles, 'posts');
          }
          
          // Fetch testimonials
          const testimonialsResponse = await fetch(`https://api.github.com/repos/${this.repoOwner}/${this.repoName}/contents/blog/testimonials`);
          if (testimonialsResponse.ok) {
            const testimonialFiles = await testimonialsResponse.json();
            this.testimonials = await this.parseMarkdownFiles(testimonialFiles, 'testimonials');
          }
          
          this.updateStats();
        } catch (error) {
          console.error('Error loading content:', error);
          this.showToast('Error loading content', 'error');
        }
        
        document.getElementById('loading-state').classList.add('hidden');
      },
      
      async parseMarkdownFiles(files, type) {
        const items = [];
        
        for (const file of files) {
          if (!file.name.endsWith('.md') || file.name === '.gitkeep') continue;
          
          try {
            const response = await fetch(file.download_url);
            const content = await response.text();
            const parsed = this.parseFrontMatter(content);
            
            items.push({
              ...parsed.data,
              slug: file.name.replace('.md', ''),
              body: parsed.content,
              type: type,
              path: file.path
            });
          } catch (e) {
            console.error(`Error parsing ${file.name}:`, e);
          }
        }
        
        return items.sort((a, b) => new Date(b.date) - new Date(a.date));
      },
      
      parseFrontMatter(content) {
        const match = content.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
        if (!match) return { data: {}, content };
        
        const frontMatter = match[1];
        const body = match[2];
        const data = {};
        
        // Simple YAML parser for front matter
        let currentKey = null;
        let inList = false;
        let listItems = [];
        
        frontMatter.split('\n').forEach(line => {
          const keyMatch = line.match(/^(\w+):\s*(.*)$/);
          if (keyMatch) {
            if (inList && currentKey) {
              data[currentKey] = listItems;
              listItems = [];
              inList = false;
            }
            
            currentKey = keyMatch[1];
            const value = keyMatch[2].trim();
            
            if (value === '') {
              inList = true;
            } else if (value.startsWith('"') && value.endsWith('"')) {
              data[currentKey] = value.slice(1, -1);
            } else if (value === 'true') {
              data[currentKey] = true;
            } else if (value === 'false') {
              data[currentKey] = false;
            } else {
              data[currentKey] = value;
            }
          } else if (line.match(/^\s+-\s+(.*)$/)) {
            inList = true;
            const item = line.match(/^\s+-\s+(.*)$/)[1];
            listItems.push(item.replace(/^["']|["']$/g, ''));
          }
        });
        
        if (inList && currentKey) {
          data[currentKey] = listItems;
        }
        
        return { data, content: body };
      },
      
      updateStats() {
        document.getElementById('stat-total').textContent = this.posts.length;
        document.getElementById('stat-published').textContent = this.posts.filter(p => p.status === 'published').length;
        document.getElementById('stat-drafts').textContent = this.posts.filter(p => p.status === 'draft' || !p.status).length;
        document.getElementById('stat-testimonials').textContent = this.testimonials.length;
      },
      
      filterItems() {
        const searchQuery = document.getElementById('search-input').value.toLowerCase();
        const statusFilter = document.getElementById('filter-status').value;
        const categoryFilter = document.getElementById('filter-category').value;
        const typeFilter = document.getElementById('filter-type').value;
        
        this.currentType = typeFilter;
        const sourceItems = typeFilter === 'posts' ? this.posts : this.testimonials;
        
        this.filteredItems = sourceItems.filter(item => {
          // Search
          const matchesSearch = !searchQuery || 
            item.title?.toLowerCase().includes(searchQuery) ||
            item.excerpt?.toLowerCase().includes(searchQuery) ||
            item.tags?.some(tag => tag.toLowerCase().includes(searchQuery)) ||
            item.shop_name?.toLowerCase().includes(searchQuery);
          
          // Status
          const matchesStatus = statusFilter === 'all' || 
            item.status === statusFilter ||
            (statusFilter === 'draft' && !item.status);
          
          // Category
          const matchesCategory = categoryFilter === 'all' || item.category === categoryFilter;
          
          return matchesSearch && matchesStatus && matchesCategory;
        });
        
        this.render();
      },
      
      render() {
        const grid = document.getElementById('posts-grid');
        const template = document.getElementById('post-card-template');
        const emptyState = document.getElementById('empty-state');
        
        grid.innerHTML = '';
        
        if (this.filteredItems.length === 0) {
          emptyState.classList.remove('hidden');
          return;
        }
        
        emptyState.classList.add('hidden');
        
        this.filteredItems.forEach(item => {
          const card = template.content.cloneNode(true);
          const container = card.querySelector('.post-card');
          
          container.dataset.slug = item.slug;
          container.dataset.type = item.type;
          
          // Image
          const img = card.querySelector('img');
          if (item.featured_image) {
            img.src = item.featured_image;
            img.alt = item.title;
          } else {
            img.parentElement.classList.add('bg-gradient-to-br', 'from-gray-200', 'to-gray-300');
            img.style.display = 'none';
          }
          
          // Status badge
          const statusBadge = card.querySelector('.status-badge');
          const status = item.status || 'draft';
          statusBadge.textContent = status.charAt(0).toUpperCase() + status.slice(1);
          if (status === 'published') {
            statusBadge.classList.add('bg-green-100', 'text-green-700');
          } else if (status === 'draft') {
            statusBadge.classList.add('bg-amber-100', 'text-amber-700');
          } else {
            statusBadge.classList.add('bg-blue-100', 'text-blue-700');
          }
          
          // Category
          const categoryBadge = card.querySelector('.category-badge');
          categoryBadge.textContent = this.formatCategory(item.category || item.shop_name || 'Uncategorized');
          
          // Date
          card.querySelector('.post-date').textContent = this.formatDate(item.date);
          
          // Title & Excerpt
          card.querySelector('.post-title').textContent = item.title;
          card.querySelector('.post-excerpt').textContent = item.excerpt || '';
          
          // Tags
          const tagsContainer = card.querySelector('.post-tags');
          if (item.tags?.length) {
            item.tags.slice(0, 3).forEach(tag => {
              const tagEl = document.createElement('span');
              tagEl.className = 'text-xs px-2 py-0.5 bg-gray-100 text-gray-500 rounded';
              tagEl.textContent = `#${tag}`;
              tagsContainer.appendChild(tagEl);
            });
          }
          
          // Checkbox
          const checkbox = card.querySelector('.card-checkbox');
          checkbox.checked = this.selectedItems.has(item.slug);
          checkbox.addEventListener('change', (e) => {
            if (e.target.checked) {
              this.selectedItems.add(item.slug);
            } else {
              this.selectedItems.delete(item.slug);
            }
            this.updateActionBar();
          });
          
          // Edit link
          const editLink = card.querySelector('.action-edit');
          const collection = item.type === 'posts' ? 'posts' : 'testimonials';
          editLink.href = `/admin/#/collections/${collection}/entries/${item.slug}`;
          
          // Duplicate button
          card.querySelector('.action-duplicate').addEventListener('click', () => this.duplicateItem(item));
          
          // Delete button
          card.querySelector('.action-delete').addEventListener('click', () => this.deleteItem(item));
          
          grid.appendChild(card);
        });
      },
      
      formatCategory(category) {
        if (!category) return 'Uncategorized';
        return category.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
      },
      
      formatDate(dateStr) {
        if (!dateStr) return '';
        const date = new Date(dateStr);
        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      },
      
      toggleSelectMode() {
        this.selectMode = !this.selectMode;
        document.getElementById('posts-grid').classList.toggle('select-mode', this.selectMode);
        document.getElementById('select-mode-btn').classList.toggle('bg-joe-red', this.selectMode);
        document.getElementById('select-mode-btn').classList.toggle('text-white', this.selectMode);
        this.updateActionBar();
      },
      
      selectAll() {
        this.filteredItems.forEach(item => this.selectedItems.add(item.slug));
        this.render();
        this.updateActionBar();
      },
      
      clearSelection() {
        this.selectedItems.clear();
        this.render();
        this.updateActionBar();
      },
      
      updateActionBar() {
        const actionBar = document.getElementById('action-bar');
        document.getElementById('selected-count').textContent = this.selectedItems.size;
        
        if (this.selectedItems.size > 0 || this.selectMode) {
          actionBar.classList.add('visible');
        } else {
          actionBar.classList.remove('visible');
        }
      },
      
      duplicateItem(item) {
        // Open CMS with duplicated content (user will need to save manually)
        const collection = item.type === 'posts' ? 'posts' : 'testimonials';
        const newSlug = `${item.slug}-copy`;
        
        // Store in sessionStorage for the CMS to pick up
        sessionStorage.setItem('duplicate_post', JSON.stringify({
          ...item,
          title: `${item.title} (Copy)`,
          slug: newSlug,
          status: 'draft'
        }));
        
        this.showToast(`Opening editor to create copy...`, 'success');
        window.open(`/admin/#/collections/${collection}/new`, '_blank');
      },
      
      async deleteItem(item) {
        if (!confirm(`Are you sure you want to delete "${item.title}"?\n\nThis will open the CMS editor where you can delete the file.`)) return;
        
        const collection = item.type === 'posts' ? 'posts' : 'testimonials';
        window.open(`/admin/#/collections/${collection}/entries/${item.slug}`, '_blank');
        this.showToast('Opened editor - click "Delete" in the CMS to remove', 'info');
      },
      
      async bulkDelete() {
        if (!confirm(`Delete ${this.selectedItems.size} items?\n\nYou'll need to delete each one in the CMS.`)) return;
        
        const collection = this.currentType === 'posts' ? 'posts' : 'testimonials';
        this.selectedItems.forEach(slug => {
          window.open(`/admin/#/collections/${collection}/entries/${slug}`, '_blank');
        });
        
        this.showToast(`Opened ${this.selectedItems.size} editors - delete each in CMS`, 'info');
        this.clearSelection();
      },
      
      showToast(message, type = 'info') {
        const container = document.getElementById('toast-container');
        const toast = document.createElement('div');
        
        const colors = {
          success: 'bg-green-600',
          error: 'bg-red-600',
          info: 'bg-blue-600'
        };
        
        toast.className = `toast ${colors[type]} text-white px-4 py-3 rounded-lg shadow-lg`;
        toast.textContent = message;
        container.appendChild(toast);
        
        setTimeout(() => toast.remove(), 3000);
      },
      
      bindEvents() {
        // Search
        document.getElementById('search-input').addEventListener('input', 
          this.debounce(() => this.filterItems(), 300));
        
        // Filters
        document.getElementById('filter-status').addEventListener('change', () => this.filterItems());
        document.getElementById('filter-category').addEventListener('change', () => this.filterItems());
        document.getElementById('filter-type').addEventListener('change', () => this.filterItems());
        
        // Select mode
        document.getElementById('select-mode-btn').addEventListener('click', () => this.toggleSelectMode());
        document.getElementById('select-all-btn').addEventListener('click', () => this.selectAll());
        document.getElementById('clear-selection-btn').addEventListener('click', () => this.clearSelection());
        
        // Bulk actions
        document.getElementById('bulk-delete-btn').addEventListener('click', () => this.bulkDelete());
      },
      
      debounce(fn, ms) {
        let timeout;
        return (...args) => {
          clearTimeout(timeout);
          timeout = setTimeout(() => fn.apply(this, args), ms);
        };
      }
    };
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => AdminDashboard.init());
  </script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog | joe Coffee</title>
  <meta name="description" content="Stories from the joe community. Tips for coffee lovers, shop spotlights, and the latest from indie coffee culture.">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Blog | joe Coffee">
  <meta property="og:description" content="Stories from the joe community. Tips, spotlights, and indie coffee culture.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://joe.coffee/blog">
  <meta property="og:site_name" content="joe Coffee">
  
  <link rel="canonical" href="https://joe.coffee/blog">
  <link rel="icon" type="image/png" href="https://4591743.fs1.hubspotusercontent-na1.net/hubfs/4591743/Black.png">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@500;600;700&display=swap" rel="stylesheet">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['DM Sans', 'sans-serif'],
            display: ['Fraunces', 'serif'],
          },
          colors: {
            joe: { red: '#E53935', dark: '#1a1a1a', cream: '#FDF8F3' }
          }
        }
      }
    }
  </script>
  
  <!-- JSON-LD Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Blog",
    "name": "joe Coffee Blog",
    "description": "Stories from the indie coffee community.",
    "url": "https://joe.coffee/blog",
    "publisher": {
      "@type": "Organization",
      "name": "joe Coffee",
      "logo": { "@type": "ImageObject", "url": "https://joe.coffee/images/logo.png" }
    }
  }
  </script>
  
  <style>
    body { font-family: 'DM Sans', sans-serif; }
    .font-display { font-family: 'Fraunces', serif; }
    .nav-blur { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
    .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    .blog-card { transition: all 0.3s ease; }
    .blog-card:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0,0,0,0.1); }
    .category-btn.active { background: #1a1a1a; color: white; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body class="min-h-screen bg-white text-gray-900">
  
  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-100 nav-blur" style="background-color: rgba(255,255,255,0.95);">
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      <a href="/" class="flex items-center">
        <img src="https://4591743.fs1.hubspotusercontent-na1.net/hubfs/4591743/Black.png" alt="joe" class="h-8">
      </a>
      <div class="hidden md:flex items-center gap-8 text-sm text-gray-600">
        <a href="/cities" class="hover:text-black transition-colors">Find Shops</a>
        <a href="/blog" class="text-black font-medium">Blog</a>
        <a href="/testimonials" class="hover:text-black transition-colors">Success Stories</a>
        <a href="https://joe.coffee" class="hover:text-black transition-colors">For Coffee Shops</a>
      </div>
      <a href="https://apps.apple.com/us/app/joe-coffee-order-ahead/id1437558382" class="bg-joe-dark text-white px-5 py-2.5 rounded-full text-sm font-semibold hover:bg-black transition-colors">
        Get the App
      </a>
    </div>
  </nav>

  <!-- Hero -->
  <section class="pt-28 pb-8 bg-joe-cream">
    <div class="max-w-7xl mx-auto px-6">
      <h1 class="font-display text-4xl md:text-5xl font-bold text-joe-dark mb-4">The joe Blog</h1>
      <p class="text-lg text-gray-600 max-w-2xl">
        Stories from the indie coffee community. Shop spotlights, brewing tips, and what's new at joe.
      </p>
    </div>
  </section>

  <!-- Category Filter -->
  <section class="border-b border-gray-100 sticky top-[73px] bg-white z-40">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex gap-2 py-4 overflow-x-auto hide-scrollbar">
        <button class="category-btn active px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all" data-category="all">All Posts</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="community">Shop Spotlights</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="industry-trends">Industry Trends</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="build-in-public">Build In Public</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="loyalty-marketing">Loyalty & Marketing</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="mobile-ordering">Mobile Ordering</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="barista">Barista</button>
      </div>
    </div>
  </section>

  <!-- Blog Grid -->
  <section class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-6">
      
      <!-- Loading State -->
      <div id="loading-state" class="text-center py-16">
        <div class="w-8 h-8 border-4 border-joe-red border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
        <p class="text-gray-500">Loading posts...</p>
      </div>
      
      <!-- Posts Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="blog-grid"></div>
      
      <!-- Empty State -->
      <div id="empty-state" class="hidden text-center py-16">
        <p class="text-gray-500">No posts found in this category</p>
      </div>

      <!-- Load More -->
      <div class="text-center mt-12" id="load-more-container">
        <button id="load-more-btn" class="px-8 py-3 bg-gray-100 text-gray-700 rounded-full font-medium hover:bg-gray-200 transition-colors hidden">
          Load More Posts
        </button>
      </div>
    </div>
  </section>

  <!-- Newsletter CTA -->
  <section class="py-16 bg-joe-dark text-white">
    <div class="max-w-2xl mx-auto px-6 text-center">
      <h2 class="font-display text-3xl font-bold mb-4">Get the latest from joe</h2>
      <p class="text-gray-400 mb-8">Weekly stories, tips, and updates from the indie coffee community.</p>
      <form class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto" id="newsletter-form">
        <input 
          type="email" 
          name="email"
          placeholder="Enter your email" 
          class="flex-1 px-5 py-3 rounded-full bg-white text-black placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-joe-red"
          required
        >
        <button type="submit" class="px-8 py-3 bg-joe-red text-white rounded-full font-semibold hover:bg-red-600 transition-colors">
          Subscribe
        </button>
      </form>
      <p class="text-gray-500 text-sm mt-4">No spam. Unsubscribe anytime.</p>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-12 bg-joe-cream border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex flex-col md:flex-row justify-between items-center gap-6">
        <div class="flex items-center gap-6">
          <img src="https://4591743.fs1.hubspotusercontent-na1.net/hubfs/4591743/Black.png" alt="joe" class="h-6">
          <span class="text-gray-400 text-sm">© 2025 joe Coffee</span>
        </div>
        <div class="flex gap-6 text-sm text-gray-500">
          <a href="/cities" class="hover:text-black transition-colors">Find Shops</a>
          <a href="/blog" class="hover:text-black transition-colors">Blog</a>
          <a href="/testimonials" class="hover:text-black transition-colors">Success Stories</a>
          <a href="https://joe.coffee" class="hover:text-black transition-colors">For Coffee Shops</a>
          <a href="https://joe.coffee/terms-of-service-privacy-policy/" class="hover:text-black transition-colors">Privacy</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const BlogPage = {
      posts: [],
      filteredPosts: [],
      currentCategory: 'all',
      page: 1,
      perPage: 9,
      
      repoOwner: 'brendencoffey',
      repoName: 'joe-marketing-site',
      
      categoryColors: {
        'industry-trends': { bg: 'bg-amber-50', text: 'text-amber-700' },
        'build-in-public': { bg: 'bg-purple-50', text: 'text-purple-700' },
        'loyalty-marketing': { bg: 'bg-green-50', text: 'text-green-700' },
        'coffee-shop-marketing': { bg: 'bg-green-50', text: 'text-green-700' },
        'mobile-ordering': { bg: 'bg-blue-50', text: 'text-blue-700' },
        'coffee-shop-owner': { bg: 'bg-rose-50', text: 'text-rose-700' },
        'barista': { bg: 'bg-teal-50', text: 'text-teal-700' },
        'community': { bg: 'bg-indigo-50', text: 'text-indigo-700' },
        'product-updates': { bg: 'bg-cyan-50', text: 'text-cyan-700' }
      },
      
      async init() {
        this.bindEvents();
        await this.loadPosts();
        this.filterPosts();
        this.render();
      },
      
      async loadPosts() {
        try {
          const response = await fetch(`https://api.github.com/repos/${this.repoOwner}/${this.repoName}/contents/blog/posts`);
          if (!response.ok) throw new Error('Failed to fetch');
          
          const files = await response.json();
          
          for (const file of files) {
            if (!file.name.endsWith('.md') || file.name === '.gitkeep') continue;
            
            try {
              const contentResponse = await fetch(file.download_url);
              const content = await contentResponse.text();
              const parsed = this.parseFrontMatter(content);
              
              // Only include published posts
              if (parsed.data.status === 'published' || !parsed.data.status) {
                this.posts.push({
                  ...parsed.data,
                  slug: file.name.replace('.md', ''),
                  body: parsed.content
                });
              }
            } catch (e) {
              console.error(`Error parsing ${file.name}:`, e);
            }
          }
          
          // Sort by date
          this.posts.sort((a, b) => new Date(b.date) - new Date(a.date));
          
        } catch (error) {
          console.error('Error loading posts:', error);
        }
        
        document.getElementById('loading-state').classList.add('hidden');
      },
      
      parseFrontMatter(content) {
        const match = content.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
        if (!match) return { data: {}, content };
        
        const frontMatter = match[1];
        const body = match[2];
        const data = {};
        
        let currentKey = null;
        let inList = false;
        let listItems = [];
        
        frontMatter.split('\n').forEach(line => {
          const keyMatch = line.match(/^(\w+):\s*(.*)$/);
          if (keyMatch) {
            if (inList && currentKey) {
              data[currentKey] = listItems;
              listItems = [];
              inList = false;
            }
            
            currentKey = keyMatch[1];
            const value = keyMatch[2].trim();
            
            if (value === '') {
              inList = true;
            } else if (value.startsWith('"') && value.endsWith('"')) {
              data[currentKey] = value.slice(1, -1);
            } else if (value === 'true') {
              data[currentKey] = true;
            } else if (value === 'false') {
              data[currentKey] = false;
            } else {
              data[currentKey] = value;
            }
          } else if (line.match(/^\s+-\s+(.*)$/)) {
            inList = true;
            const item = line.match(/^\s+-\s+(.*)$/)[1];
            listItems.push(item.replace(/^["']|["']$/g, ''));
          }
        });
        
        if (inList && currentKey) {
          data[currentKey] = listItems;
        }
        
        return { data, content: body };
      },
      
      filterPosts() {
        if (this.currentCategory === 'all') {
          this.filteredPosts = [...this.posts];
        } else {
          this.filteredPosts = this.posts.filter(post => post.category === this.currentCategory);
        }
        this.page = 1;
      },
      
      render() {
        const grid = document.getElementById('blog-grid');
        const emptyState = document.getElementById('empty-state');
        const loadMoreBtn = document.getElementById('load-more-btn');
        
        const visiblePosts = this.filteredPosts.slice(0, this.page * this.perPage);
        
        if (visiblePosts.length === 0) {
          grid.innerHTML = '';
          emptyState.classList.remove('hidden');
          loadMoreBtn.classList.add('hidden');
          return;
        }
        
        emptyState.classList.add('hidden');
        grid.innerHTML = '';
        
        visiblePosts.forEach(post => {
          const colors = this.categoryColors[post.category] || { bg: 'bg-gray-100', text: 'text-gray-700' };
          
          const card = document.createElement('a');
          card.href = `/blog/posts/${post.slug}/`;
          card.className = 'blog-card block bg-white rounded-2xl overflow-hidden border border-gray-100';
          
          card.innerHTML = `
            <div class="aspect-video bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden">
              ${post.featured_image ? `<img src="${post.featured_image}" alt="${post.title}" class="w-full h-full object-cover">` : ''}
            </div>
            <div class="p-5">
              <div class="flex items-center gap-3 mb-3">
                <span class="${colors.bg} ${colors.text} px-2.5 py-1 rounded-full text-xs font-medium">${this.formatCategory(post.category)}</span>
                <span class="text-gray-400 text-sm">${this.formatDate(post.date)}</span>
              </div>
              <h3 class="text-lg font-bold text-gray-900 mb-2 line-clamp-2">${post.title}</h3>
              <p class="text-gray-600 text-sm line-clamp-2">${post.excerpt || ''}</p>
              ${post.tags?.length ? `
                <div class="flex flex-wrap gap-2 mt-3">
                  ${post.tags.slice(0, 3).map(tag => `<span class="text-xs text-gray-400">#${tag}</span>`).join('')}
                </div>
              ` : ''}
            </div>
          `;
          
          grid.appendChild(card);
        });
        
        // Show/hide load more
        if (visiblePosts.length < this.filteredPosts.length) {
          loadMoreBtn.classList.remove('hidden');
        } else {
          loadMoreBtn.classList.add('hidden');
        }
      },
      
      formatCategory(category) {
        if (!category) return 'General';
        return category.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
      },
      
      formatDate(dateStr) {
        if (!dateStr) return '';
        const date = new Date(dateStr);
        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      },
      
      bindEvents() {
        // Category filters
        document.querySelectorAll('.category-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            // Update active state
            document.querySelectorAll('.category-btn').forEach(b => {
              b.classList.remove('active', 'bg-joe-dark', 'text-white');
              b.classList.add('bg-gray-100', 'text-gray-700');
            });
            btn.classList.add('active', 'bg-joe-dark', 'text-white');
            btn.classList.remove('bg-gray-100', 'text-gray-700');
            
            // Filter posts
            this.currentCategory = btn.dataset.category;
            this.filterPosts();
            this.render();
          });
        });
        
        // Load more
        document.getElementById('load-more-btn').addEventListener('click', () => {
          this.page++;
          this.render();
        });
        
        // Newsletter form
        document.getElementById('newsletter-form').addEventListener('submit', (e) => {
          e.preventDefault();
          alert('Thanks for subscribing!');
          e.target.reset();
        });
      }
    };
    
    document.addEventListener('DOMContentLoaded', () => BlogPage.init());
  </script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Success Stories | joe Coffee</title>
  <meta name="description" content="See how independent coffee shops are growing with joe. Real stories from real shop owners about increased revenue, customer loyalty, and streamlined operations.">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Success Stories | joe Coffee">
  <meta property="og:description" content="See how independent coffee shops are growing with joe.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://joe.coffee/testimonials">
  <meta property="og:site_name" content="joe Coffee">
  
  <link rel="canonical" href="https://joe.coffee/testimonials">
  <link rel="icon" type="image/png" href="https://4591743.fs1.hubspotusercontent-na1.net/hubfs/4591743/Black.png">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@500;600;700&display=swap" rel="stylesheet">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['DM Sans', 'sans-serif'],
            display: ['Fraunces', 'serif'],
          },
          colors: {
            joe: { red: '#E53935', dark: '#1a1a1a', cream: '#FDF8F3' }
          }
        }
      }
    }
  </script>
  
  <!-- JSON-LD Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "joe Coffee Success Stories",
    "description": "Real stories from independent coffee shops growing with joe.",
    "url": "https://joe.coffee/testimonials",
    "publisher": {
      "@type": "Organization",
      "name": "joe Coffee"
    }
  }
  </script>
  
  <style>
    body { font-family: 'DM Sans', sans-serif; }
    .font-display { font-family: 'Fraunces', serif; }
    .nav-blur { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
    .testimonial-card { transition: all 0.3s ease; }
    .testimonial-card:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0,0,0,0.1); }
    .highlight-badge { animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
    .category-btn.active { background: #1a1a1a; color: white; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body class="min-h-screen bg-white text-gray-900">
  
  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-100 nav-blur" style="background-color: rgba(255,255,255,0.95);">
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      <a href="/" class="flex items-center">
        <img src="https://4591743.fs1.hubspotusercontent-na1.net/hubfs/4591743/Black.png" alt="joe" class="h-8">
      </a>
      <div class="hidden md:flex items-center gap-8 text-sm text-gray-600">
        <a href="/cities" class="hover:text-black transition-colors">Find Shops</a>
        <a href="/blog" class="hover:text-black transition-colors">Blog</a>
        <a href="/testimonials" class="text-black font-medium">Success Stories</a>
        <a href="https://joe.coffee" class="hover:text-black transition-colors">For Coffee Shops</a>
      </div>
      <a href="https://joe.coffee/get-started" class="bg-joe-red text-white px-5 py-2.5 rounded-full text-sm font-semibold hover:bg-red-600 transition-colors">
        Get Started
      </a>
    </div>
  </nav>

  <!-- Hero -->
  <section class="pt-28 pb-12 bg-joe-cream">
    <div class="max-w-7xl mx-auto px-6 text-center">
      <h1 class="font-display text-4xl md:text-5xl font-bold text-joe-dark mb-4">Success Stories</h1>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-8">
        See how independent coffee shops across the country are growing their business, building customer loyalty, and thriving with joe.
      </p>
      
      <!-- Stats -->
      <div class="flex flex-wrap justify-center gap-8 md:gap-16">
        <div>
          <p class="text-4xl font-bold text-joe-red">500+</p>
          <p class="text-gray-600">Partner Shops</p>
        </div>
        <div>
          <p class="text-4xl font-bold text-joe-red">25%</p>
          <p class="text-gray-600">Avg. Growth</p>
        </div>
        <div>
          <p class="text-4xl font-bold text-joe-red">19x</p>
          <p class="text-gray-600">Loyalty ROI</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Category Filter -->
  <section class="border-b border-gray-100 sticky top-[73px] bg-white z-40">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex gap-2 py-4 overflow-x-auto hide-scrollbar">
        <button class="category-btn active px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all" data-category="all">All Stories</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="joe-pos">joe POS</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="mobile-ordering">Mobile Ordering</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="loyalty-marketing">Loyalty & Marketing</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="square-integration">Square Integration</button>
        <button class="category-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium whitespace-nowrap hover:bg-gray-200 transition-all" data-category="barista-workflow">Barista Workflow</button>
      </div>
    </div>
  </section>

  <!-- Testimonials Grid -->
  <section class="py-12 bg-white">
    <div class="max-w-7xl mx-auto px-6">
      
      <!-- Loading State -->
      <div id="loading-state" class="text-center py-16">
        <div class="w-8 h-8 border-4 border-joe-red border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
        <p class="text-gray-500">Loading success stories...</p>
      </div>
      
      <!-- Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="testimonials-grid"></div>
      
      <!-- Empty State -->
      <div id="empty-state" class="hidden text-center py-16">
        <p class="text-gray-500">No stories found in this category</p>
      </div>

      <!-- Load More -->
      <div class="text-center mt-12">
        <button id="load-more-btn" class="px-8 py-3 bg-gray-100 text-gray-700 rounded-full font-medium hover:bg-gray-200 transition-colors hidden">
          Load More Stories
        </button>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-joe-dark text-white">
    <div class="max-w-3xl mx-auto px-6 text-center">
      <h2 class="font-display text-3xl font-bold mb-4">Ready to write your success story?</h2>
      <p class="text-gray-400 mb-8">Join hundreds of independent coffee shops using joe to boost sales and build loyalty.</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="https://joe.coffee/get-started" class="px-8 py-3 bg-joe-red text-white rounded-full font-semibold hover:bg-red-600 transition-colors">
          Get Started Free
        </a>
        <a href="https://joe.coffee/pricing" class="px-8 py-3 bg-white text-joe-dark rounded-full font-semibold hover:bg-gray-100 transition-colors">
          View Pricing
        </a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-12 bg-joe-cream border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex flex-col md:flex-row justify-between items-center gap-6">
        <div class="flex items-center gap-6">
          <img src="https://4591743.fs1.hubspotusercontent-na1.net/hubfs/4591743/Black.png" alt="joe" class="h-6">
          <span class="text-gray-400 text-sm">© 2025 joe Coffee</span>
        </div>
        <div class="flex gap-6 text-sm text-gray-500">
          <a href="/cities" class="hover:text-black transition-colors">Find Shops</a>
          <a href="/blog" class="hover:text-black transition-colors">Blog</a>
          <a href="/testimonials" class="hover:text-black transition-colors">Success Stories</a>
          <a href="https://joe.coffee" class="hover:text-black transition-colors">For Coffee Shops</a>
          <a href="https://joe.coffee/terms-of-service-privacy-policy/" class="hover:text-black transition-colors">Privacy</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const TestimonialsPage = {
      testimonials: [],
      filteredTestimonials: [],
      currentCategory: 'all',
      page: 1,
      perPage: 9,
      
      repoOwner: 'brendencoffey',
      repoName: 'joe-marketing-site',
      
      categoryColors: {
        'joe-pos': { bg: 'bg-purple-50', text: 'text-purple-700' },
        'mobile-ordering': { bg: 'bg-blue-50', text: 'text-blue-700' },
        'loyalty-marketing': { bg: 'bg-green-50', text: 'text-green-700' },
        'square-integration': { bg: 'bg-orange-50', text: 'text-orange-700' },
        'barista-workflow': { bg: 'bg-teal-50', text: 'text-teal-700' },
        'coffee-shop-launch': { bg: 'bg-pink-50', text: 'text-pink-700' }
      },
      
      async init() {
        this.bindEvents();
        await this.loadTestimonials();
        this.filterTestimonials();
        this.render();
      },
      
      async loadTestimonials() {
        try {
          const response = await fetch(`https://api.github.com/repos/${this.repoOwner}/${this.repoName}/contents/blog/testimonials`);
          if (!response.ok) throw new Error('Failed to fetch');
          
          const files = await response.json();
          
          for (const file of files) {
            if (!file.name.endsWith('.md') || file.name === '.gitkeep') continue;
            
            try {
              const contentResponse = await fetch(file.download_url);
              const content = await contentResponse.text();
              const parsed = this.parseFrontMatter(content);
              
              if (parsed.data.status === 'published' || !parsed.data.status) {
                this.testimonials.push({
                  ...parsed.data,
                  slug: file.name.replace('.md', ''),
                  body: parsed.content
                });
              }
            } catch (e) {
              console.error(`Error parsing ${file.name}:`, e);
            }
          }
          
          // Sort by date
          this.testimonials.sort((a, b) => new Date(b.date) - new Date(a.date));
          
        } catch (error) {
          console.error('Error loading testimonials:', error);
        }
        
        document.getElementById('loading-state').classList.add('hidden');
      },
      
      parseFrontMatter(content) {
        const match = content.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
        if (!match) return { data: {}, content };
        
        const frontMatter = match[1];
        const body = match[2];
        const data = {};
        
        let currentKey = null;
        let inList = false;
        let listItems = [];
        
        frontMatter.split('\n').forEach(line => {
          const keyMatch = line.match(/^(\w+):\s*(.*)$/);
          if (keyMatch) {
            if (inList && currentKey) {
              data[currentKey] = listItems;
              listItems = [];
              inList = false;
            }
            
            currentKey = keyMatch[1];
            const value = keyMatch[2].trim();
            
            if (value === '') {
              inList = true;
            } else if (value.startsWith('"') && value.endsWith('"')) {
              data[currentKey] = value.slice(1, -1);
            } else if (value === 'true') {
              data[currentKey] = true;
            } else if (value === 'false') {
              data[currentKey] = false;
            } else {
              data[currentKey] = value;
            }
          } else if (line.match(/^\s+-\s+(.*)$/)) {
            inList = true;
            const item = line.match(/^\s+-\s+(.*)$/)[1];
            listItems.push(item.replace(/^["']|["']$/g, ''));
          }
        });
        
        if (inList && currentKey) {
          data[currentKey] = listItems;
        }
        
        return { data, content: body };
      },
      
      filterTestimonials() {
        if (this.currentCategory === 'all') {
          this.filteredTestimonials = [...this.testimonials];
        } else {
          this.filteredTestimonials = this.testimonials.filter(t => t.category === this.currentCategory);
        }
        this.page = 1;
      },
      
      render() {
        const grid = document.getElementById('testimonials-grid');
        const emptyState = document.getElementById('empty-state');
        const loadMoreBtn = document.getElementById('load-more-btn');
        
        const visibleItems = this.filteredTestimonials.slice(0, this.page * this.perPage);
        
        if (visibleItems.length === 0) {
          grid.innerHTML = '';
          emptyState.classList.remove('hidden');
          loadMoreBtn.classList.add('hidden');
          return;
        }
        
        emptyState.classList.add('hidden');
        grid.innerHTML = '';
        
        visibleItems.forEach(item => {
          const colors = this.categoryColors[item.category] || { bg: 'bg-gray-100', text: 'text-gray-700' };
          
          const card = document.createElement('a');
          card.href = `/blog/testimonials/${item.slug}/`;
          card.className = 'testimonial-card block bg-white rounded-2xl overflow-hidden border border-gray-100';
          
          card.innerHTML = `
            <div class="aspect-video bg-gradient-to-br from-joe-cream to-gray-100 relative overflow-hidden">
              ${item.featured_image ? `<img src="${item.featured_image}" alt="${item.shop_name}" class="w-full h-full object-cover">` : `
                <div class="absolute inset-0 flex items-center justify-center">
                  <span class="text-6xl">☕</span>
                </div>
              `}
              ${item.featured ? '<span class="absolute top-3 right-3 bg-joe-red text-white px-2 py-1 rounded-full text-xs font-medium">Featured</span>' : ''}
            </div>
            <div class="p-5">
              <div class="flex items-center gap-3 mb-3">
                <span class="${colors.bg} ${colors.text} px-2.5 py-1 rounded-full text-xs font-medium">${this.formatCategory(item.category)}</span>
              </div>
              <h3 class="text-lg font-bold text-gray-900 mb-1">${item.shop_name || item.title}</h3>
              ${item.location ? `<p class="text-gray-500 text-sm mb-3">${item.location}</p>` : ''}
              <p class="text-gray-600 text-sm line-clamp-2">${item.excerpt || ''}</p>
              ${item.highlights?.length ? `
                <div class="flex flex-wrap gap-2 mt-4">
                  ${item.highlights.slice(0, 2).map(h => `
                    <span class="highlight-badge bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-medium">${h}</span>
                  `).join('')}
                </div>
              ` : ''}
            </div>
          `;
          
          grid.appendChild(card);
        });
        
        // Show/hide load more
        if (visibleItems.length < this.filteredTestimonials.length) {
          loadMoreBtn.classList.remove('hidden');
        } else {
          loadMoreBtn.classList.add('hidden');
        }
      },
      
      formatCategory(category) {
        if (!category) return 'Success Story';
        return category.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
      },
      
      bindEvents() {
        // Category filters
        document.querySelectorAll('.category-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            document.querySelectorAll('.category-btn').forEach(b => {
              b.classList.remove('active', 'bg-joe-dark', 'text-white');
              b.classList.add('bg-gray-100', 'text-gray-700');
            });
            btn.classList.add('active', 'bg-joe-dark', 'text-white');
            btn.classList.remove('bg-gray-100', 'text-gray-700');
            
            this.currentCategory = btn.dataset.category;
            this.filterTestimonials();
            this.render();
          });
        });
        
        // Load more
        document.getElementById('load-more-btn').addEventListener('click', () => {
          this.page++;
          this.render();
        });
      }
    };
    
    document.addEventListener('DOMContentLoaded', () => TestimonialsPage.init());
  </script>

</body>
</html>
