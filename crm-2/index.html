<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>joe CRM</title>
  <link rel="icon" href="https://joe.coffee/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
</head>
<body>
  <!-- Auth Screen -->
  <div id="auth-screen" class="auth-screen">
    <div class="auth-container">
      <img src="https://joe.coffee/images/logo.png" alt="joe" class="auth-logo">
      <h1>joe CRM</h1>
      <p>Sign in with your joe.coffee account</p>
      <button id="google-signin-btn" class="btn btn-primary btn-lg">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z" fill="#4285F4"/><path d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 009 18z" fill="#34A853"/><path d="M3.964 10.71A5.41 5.41 0 013.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 000 9c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/><path d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 00.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z" fill="#EA4335"/></svg>
        Sign in with Google
      </button>
    </div>
  </div>

  <!-- Main App -->
  <div id="app" class="app hidden">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <img src="https://joe.coffee/images/logo.png" alt="joe" class="sidebar-logo">
        <span class="sidebar-title">CRM</span>
      </div>
      
      <nav class="sidebar-nav">
        <a href="#dashboard" class="nav-item active" data-page="dashboard">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
          Dashboard
        </a>
        <a href="#pipeline" class="nav-item" data-page="pipeline">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg>
          Pipeline
        </a>
        <a href="#deals" class="nav-item" data-page="deals">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
          Deals
        </a>
        <a href="#companies" class="nav-item" data-page="companies">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
          Companies
        </a>
        <a href="#contacts" class="nav-item" data-page="contacts">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
          Contacts
        </a>
        <a href="#shops" class="nav-item" data-page="shops">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
          Shops
        </a>
        
        <div class="nav-divider"></div>
        
        <a href="#tasks" class="nav-item" data-page="tasks">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/></svg>
          Tasks
          <span id="tasks-badge" class="nav-badge hidden">0</span>
        </a>
        <a href="#sms" class="nav-item" data-page="sms">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
          SMS Inbox
          <span id="sms-badge" class="nav-badge hidden">0</span>
        </a>
        <a href="#meetings" class="nav-item" data-page="meetings">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
          Meetings
        </a>
        <a href="#sequences" class="nav-item" data-page="sequences">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
          Sequences
        </a>
        
        <div class="nav-divider"></div>
        
        <a href="#settings" class="nav-item" data-page="settings">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
          Settings
        </a>
      </nav>
      
      <div class="sidebar-footer">
        <div class="user-menu" id="user-menu">
          <img id="user-avatar" src="" alt="" class="user-avatar">
          <div class="user-info">
            <span id="user-name" class="user-name"></span>
            <span id="user-email" class="user-email"></span>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="main-header">
        <div class="header-left">
          <h1 id="page-title">Dashboard</h1>
        </div>
        <div class="header-right">
          <div class="search-box">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
            <input type="text" id="global-search" placeholder="Search... (âŒ˜K)">
          </div>
          <button class="btn btn-primary" id="main-action-btn">
            <i data-lucide="plus"></i>
            New Deal
          </button>
        </div>
      </header>

      <!-- Page Container -->
      <div class="page-container">
        <!-- Dashboard Page -->
        <div id="page-dashboard" class="page active">
          <div class="dashboard-stats" id="dashboard-stats"></div>
          <div class="dashboard-grid">
            <div class="dashboard-card" id="dashboard-tasks">
              <h3>My Tasks</h3>
              <div class="card-content" id="my-tasks-list"></div>
            </div>
            <div class="dashboard-card" id="dashboard-activity">
              <h3>Recent Activity</h3>
              <div class="card-content" id="recent-activity-list"></div>
            </div>
            <div class="dashboard-card" id="dashboard-deals">
              <h3>Hot Deals</h3>
              <div class="card-content" id="hot-deals-list"></div>
            </div>
            <div class="dashboard-card" id="dashboard-ai">
              <h3>AI Briefing</h3>
              <div class="card-content" id="ai-briefing"></div>
            </div>
          </div>
        </div>

        <!-- Pipeline Page -->
        <div id="page-pipeline" class="page">
          <div class="pipeline-header">
            <div class="pipeline-tabs" id="pipeline-tabs"></div>
            <div class="pipeline-filters">
              <select id="pipeline-owner-filter">
                <option value="">All Owners</option>
              </select>
              <input type="text" id="pipeline-search" placeholder="Search deals...">
            </div>
          </div>
          <div class="pipeline-board" id="pipeline-board"></div>
        </div>

        <!-- Deals Page -->
        <div id="page-deals" class="page">
          <div class="page-filters">
            <select id="deals-pipeline-filter"><option value="">All Pipelines</option></select>
            <select id="deals-stage-filter"><option value="">All Stages</option></select>
            <select id="deals-owner-filter"><option value="">All Owners</option></select>
            <input type="text" id="deals-search" placeholder="Search deals...">
          </div>
          <div id="deals-list"></div>
        </div>

        <!-- Companies Page -->
        <div id="page-companies" class="page">
          <div class="page-tabs">
            <button class="tab-btn active" data-view="list">List</button>
            <button class="tab-btn" data-view="map">Map</button>
          </div>
          <div class="page-filters">
            <select id="companies-icp-filter"><option value="">All ICP Types</option></select>
            <select id="companies-state-filter"><option value="">All States</option></select>
            <select id="companies-partner-filter">
              <option value="">All</option>
              <option value="partner">Partners</option>
              <option value="prospect">Prospects</option>
            </select>
            <input type="text" id="companies-search" placeholder="Search companies...">
          </div>
          <div id="companies-list-view" class="data-table"></div>
          <div id="companies-map-view" class="map-container hidden"></div>
        </div>

        <!-- Contacts Page -->
        <div id="page-contacts" class="page">
          <div class="page-filters">
            <select id="contacts-company-filter"><option value="">All Companies</option></select>
            <input type="text" id="contacts-search" placeholder="Search contacts...">
          </div>
          <div class="data-table" id="contacts-table"></div>
        </div>

        <!-- Shops Page -->
        <div id="page-shops" class="page">
          <div class="page-tabs">
            <button class="tab-btn active" data-view="list">List</button>
            <button class="tab-btn" data-view="map">Map</button>
          </div>
          <div class="page-filters" id="shops-filters"></div>
          <div id="shops-list-view" class="data-table"></div>
          <div id="shops-map-view" class="map-container hidden"></div>
        </div>

        <!-- Tasks Page -->
        <div id="page-tasks" class="page">
          <div class="page-filters">
            <select id="tasks-status-filter">
              <option value="pending">Open Tasks</option>
              <option value="completed">Completed</option>
              <option value="">All</option>
            </select>
            <select id="tasks-type-filter"><option value="">All Types</option></select>
            <select id="tasks-assignee-filter"><option value="">My Tasks</option></select>
          </div>
          <div class="tasks-list" id="tasks-list"></div>
        </div>

        <!-- SMS Inbox Page -->
        <div id="page-sms" class="page">
          <div class="sms-layout">
            <div class="sms-sidebar">
              <div class="sms-search">
                <input type="text" id="sms-search" placeholder="Search conversations...">
              </div>
              <div class="sms-conversations" id="sms-conversations"></div>
            </div>
            <div class="sms-main">
              <div class="sms-header" id="sms-header"></div>
              <div class="sms-messages" id="sms-messages"></div>
              <div class="sms-composer" id="sms-composer">
                <textarea id="sms-input" placeholder="Type a message..."></textarea>
                <button class="btn btn-primary" id="sms-send">Send</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Meetings Page -->
        <div id="page-meetings" class="page">
          <div class="page-filters">
            <select id="meetings-filter">
              <option value="upcoming">Upcoming</option>
              <option value="past">Past</option>
              <option value="">All</option>
            </select>
          </div>
          <div class="meetings-list" id="meetings-list"></div>
        </div>

        <!-- Sequences Page -->
        <div id="page-sequences" class="page">
          <div class="sequences-grid" id="sequences-grid"></div>
        </div>

        <!-- Settings Page -->
        <div id="page-settings" class="page">
          <div class="settings-nav">
            <a href="#settings/profile" class="settings-link active">Profile</a>
            <a href="#settings/team" class="settings-link">Team</a>
            <a href="#settings/pipelines" class="settings-link">Pipelines</a>
            <a href="#settings/icp" class="settings-link">ICP Criteria</a>
            <a href="#settings/territories" class="settings-link">Territories</a>
            <a href="#settings/integrations" class="settings-link">Integrations</a>
          </div>
          <div class="settings-content" id="settings-content"></div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modals Container -->
  <div id="modals"></div>

  <!-- Toast Container -->
  <div id="toasts" class="toast-container"></div>

  <!-- Command Palette -->
  <div id="command-palette" class="command-palette hidden">
    <div class="command-palette-overlay"></div>
    <div class="command-palette-content">
      <input type="text" id="command-input" placeholder="Type a command or search...">
      <div class="command-results" id="command-results"></div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/store.js"></script>
  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/router.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/modules/dashboard.js"></script>
  <script src="js/modules/pipeline.js"></script>
  <script src="js/modules/deals.js"></script>
  <script src="js/modules/companies.js"></script>
  <script src="js/modules/contacts.js"></script>
  <script src="js/modules/shops.js"></script>
  <script src="js/modules/tasks.js"></script>
  <script src="js/modules/sms.js"></script>
  <script src="js/modules/meetings.js"></script>
  <script src="js/modules/sequences.js"></script>
  <script src="js/modules/settings.js"></script>
  <script src="js/app.js"></script>
  <script src="js/modules/email-activity.js"></script>
</body>
</html>
