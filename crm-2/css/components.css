/* ============================================
   COMPONENTS CSS - Buttons, Cards, Modals, etc
   ============================================ */

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-lg);
  font-weight: 500;
  font-size: 0.875rem;
  transition: all var(--transition-fast);
  cursor: pointer;
  border: 1px solid transparent;
}

.btn-sm {
  padding: var(--space-1) var(--space-3);
  font-size: 0.813rem;
}

.btn-lg {
  padding: var(--space-3) var(--space-6);
  font-size: 1rem;
}

.btn-primary {
  background: var(--joe-orange);
  color: white;
}

.btn-primary:hover {
  background: var(--joe-orange-dark);
}

.btn-secondary {
  background: var(--gray-100);
  color: var(--gray-700);
  border-color: var(--gray-200);
}

.btn-secondary:hover {
  background: var(--gray-200);
}

.btn-ghost {
  background: transparent;
  color: var(--gray-600);
}

.btn-ghost:hover {
  background: var(--gray-100);
}

.btn-danger {
  background: var(--error);
  color: white;
}

.btn-danger:hover {
  background: #DC2626;
}

.btn-success {
  background: var(--success);
  color: white;
}

.btn-success:hover {
  background: #059669;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Stat Cards */
.stat-card {
  background: white;
  border-radius: var(--radius-xl);
  padding: var(--space-5);
  border: 1px solid var(--gray-200);
}

.stat-card-label {
  font-size: 0.813rem;
  color: var(--gray-500);
  margin-bottom: var(--space-1);
}

.stat-card-value {
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--gray-900);
}

.stat-card-change {
  font-size: 0.813rem;
  margin-top: var(--space-2);
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.stat-card-change.positive {
  color: var(--success);
}

.stat-card-change.negative {
  color: var(--error);
}

/* Deal Cards */
.deal-card {
  background: white;
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  box-shadow: var(--shadow-sm);
  cursor: grab;
  transition: all var(--transition-fast);
  border: 1px solid var(--gray-200);
}

.deal-card:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--gray-300);
}

.deal-card.dragging {
  opacity: 0.5;
  cursor: grabbing;
}

.deal-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--space-2);
}

.deal-card-title {
  font-weight: 600;
  font-size: 0.875rem;
  color: var(--gray-900);
  line-height: 1.3;
}

.deal-card-value {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--success);
  background: var(--success-light);
  padding: 0.125rem 0.5rem;
  border-radius: var(--radius-full);
  white-space: nowrap;
}

.deal-card-company {
  font-size: 0.813rem;
  color: var(--gray-500);
  margin-bottom: var(--space-3);
}

.deal-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.75rem;
  color: var(--gray-400);
}

.deal-card-owner {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.deal-card-owner img {
  width: 20px;
  height: 20px;
  border-radius: var(--radius-full);
}

.deal-card-days {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

/* Task Items */
.task-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
  transition: background var(--transition-fast);
}

.task-item:hover {
  background: var(--gray-50);
}

.task-checkbox {
  width: 18px;
  height: 18px;
  border: 2px solid var(--gray-300);
  border-radius: var(--radius-sm);
  cursor: pointer;
  flex-shrink: 0;
  margin-top: 2px;
  transition: all var(--transition-fast);
}

.task-checkbox:hover {
  border-color: var(--joe-orange);
}

.task-checkbox.checked {
  background: var(--success);
  border-color: var(--success);
}

.task-content {
  flex: 1;
  min-width: 0;
}

.task-title {
  font-weight: 500;
  color: var(--gray-900);
  margin-bottom: var(--space-1);
}

.task-item.completed .task-title {
  text-decoration: line-through;
  color: var(--gray-400);
}

.task-meta {
  display: flex;
  gap: var(--space-3);
  font-size: 0.75rem;
  color: var(--gray-500);
}

.task-due {
  color: var(--gray-500);
}

.task-due.overdue {
  color: var(--error);
  font-weight: 500;
}

.task-due.today {
  color: var(--warning);
  font-weight: 500;
}

/* Activity Items */
.activity-item {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-3) 0;
  border-bottom: 1px solid var(--gray-100);
}

.activity-item:last-child {
  border-bottom: none;
}

.activity-icon {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  background: var(--gray-100);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.activity-icon.email { background: var(--info-light); color: var(--info); }
.activity-icon.call { background: var(--success-light); color: var(--success); }
.activity-icon.meeting { background: var(--warning-light); color: var(--warning); }
.activity-icon.note { background: var(--gray-100); color: var(--gray-600); }
.activity-icon.sms { background: var(--joe-orange-light); color: var(--joe-orange); }

.activity-content {
  flex: 1;
  min-width: 0;
}

.activity-text {
  font-size: 0.875rem;
  color: var(--gray-700);
}

.activity-text strong {
  color: var(--gray-900);
}

.activity-time {
  font-size: 0.75rem;
  color: var(--gray-400);
  margin-top: var(--space-1);
}

/* SMS Conversation Item */
.sms-conversation-item {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  cursor: pointer;
  transition: background var(--transition-fast);
  border-bottom: 1px solid var(--gray-100);
}

.sms-conversation-item:hover {
  background: var(--gray-50);
}

.sms-conversation-item.active {
  background: var(--joe-orange-light);
}

.sms-conversation-item.unread {
  background: var(--info-light);
}

.sms-avatar {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: var(--gray-200);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  color: var(--gray-600);
  flex-shrink: 0;
}

.sms-conversation-info {
  flex: 1;
  min-width: 0;
}

.sms-conversation-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: var(--space-1);
}

.sms-conversation-name {
  font-weight: 500;
  color: var(--gray-900);
}

.sms-conversation-time {
  font-size: 0.75rem;
  color: var(--gray-400);
}

.sms-conversation-preview {
  font-size: 0.813rem;
  color: var(--gray-500);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* SMS Message Bubble */
.sms-message {
  max-width: 70%;
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-xl);
  font-size: 0.875rem;
}

.sms-message.inbound {
  background: var(--gray-100);
  color: var(--gray-900);
  align-self: flex-start;
  border-bottom-left-radius: var(--radius-sm);
}

.sms-message.outbound {
  background: var(--joe-orange);
  color: white;
  align-self: flex-end;
  border-bottom-right-radius: var(--radius-sm);
}

.sms-message-time {
  font-size: 0.688rem;
  margin-top: var(--space-1);
  opacity: 0.7;
}

/* Badges */
.badge {
  display: inline-flex;
  align-items: center;
  padding: 0.125rem 0.5rem;
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  font-weight: 500;
}

.badge-gray { background: var(--gray-100); color: var(--gray-600); }
.badge-green { background: var(--success-light); color: var(--success); }
.badge-yellow { background: var(--warning-light); color: var(--warning); }
.badge-red { background: var(--error-light); color: var(--error); }
.badge-blue { background: var(--info-light); color: var(--info); }
.badge-orange { background: var(--joe-orange-light); color: var(--joe-orange); }

/* Data Table */
.data-table table {
  width: 100%;
  border-collapse: collapse;
}

.data-table th {
  text-align: left;
  padding: var(--space-3) var(--space-4);
  font-weight: 600;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--gray-500);
  background: var(--gray-50);
  border-bottom: 1px solid var(--gray-200);
}

.data-table td {
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--gray-100);
  font-size: 0.875rem;
}

.data-table tr:hover {
  background: var(--gray-50);
}

.data-table tr {
  cursor: pointer;
}

/* Modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
  padding: var(--space-4);
}

.modal {
  background: white;
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  max-width: 600px;
  width: 100%;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.modal-lg {
  max-width: 900px;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-5) var(--space-6);
  border-bottom: 1px solid var(--gray-200);
}

.modal-title {
  font-size: 1.125rem;
  font-weight: 600;
}

.modal-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-lg);
  color: var(--gray-400);
  transition: all var(--transition-fast);
}

.modal-close:hover {
  background: var(--gray-100);
  color: var(--gray-600);
}

.modal-body {
  padding: var(--space-6);
  overflow-y: auto;
  flex: 1;
}

.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-6);
  border-top: 1px solid var(--gray-200);
  background: var(--gray-50);
}

/* Form Elements */
.form-group {
  margin-bottom: var(--space-4);
}

.form-label {
  display: block;
  font-weight: 500;
  font-size: 0.875rem;
  color: var(--gray-700);
  margin-bottom: var(--space-2);
}

.form-input,
.form-select,
.form-textarea {
  width: 100%;
  padding: var(--space-3);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  font-size: 0.875rem;
  transition: all var(--transition-fast);
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
  outline: none;
  border-color: var(--joe-orange);
  box-shadow: 0 0 0 3px var(--joe-orange-light);
}

.form-textarea {
  min-height: 100px;
  resize: vertical;
}

.form-helper {
  font-size: 0.75rem;
  color: var(--gray-500);
  margin-top: var(--space-1);
}

.form-error {
  font-size: 0.75rem;
  color: var(--error);
  margin-top: var(--space-1);
}

/* Toast Notifications */
.toast-container {
  position: fixed;
  bottom: var(--space-6);
  right: var(--space-6);
  z-index: var(--z-toast);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.toast {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-4);
  background: white;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  min-width: 300px;
  max-width: 400px;
  animation: slideIn 0.3s ease;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.toast-icon {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
}

.toast-content {
  flex: 1;
}

.toast-title {
  font-weight: 600;
  font-size: 0.875rem;
}

.toast-message {
  font-size: 0.813rem;
  color: var(--gray-500);
  margin-top: var(--space-1);
}

.toast-close {
  color: var(--gray-400);
  cursor: pointer;
}

.toast-close:hover {
  color: var(--gray-600);
}

.toast.success { border-left: 4px solid var(--success); }
.toast.error { border-left: 4px solid var(--error); }
.toast.warning { border-left: 4px solid var(--warning); }
.toast.info { border-left: 4px solid var(--info); }

/* Command Palette */
.command-palette {
  position: fixed;
  inset: 0;
  z-index: var(--z-command);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 15vh;
}

.command-palette-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
}

.command-palette-content {
  position: relative;
  background: white;
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  width: 100%;
  max-width: 600px;
  max-height: 400px;
  overflow: hidden;
}

.command-palette-content input {
  width: 100%;
  padding: var(--space-5);
  border: none;
  border-bottom: 1px solid var(--gray-200);
  font-size: 1.125rem;
  outline: none;
}

.command-results {
  max-height: 300px;
  overflow-y: auto;
}

.command-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-5);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.command-item:hover,
.command-item.active {
  background: var(--gray-100);
}

.command-item-icon {
  width: 20px;
  height: 20px;
  color: var(--gray-400);
}

.command-item-label {
  flex: 1;
}

.command-item-shortcut {
  font-size: 0.75rem;
  color: var(--gray-400);
  display: flex;
  gap: var(--space-1);
}

.command-item-shortcut kbd {
  background: var(--gray-200);
  padding: 0.125rem 0.375rem;
  border-radius: var(--radius-sm);
  font-family: inherit;
}

/* Loading Spinner */
.spinner {
  width: 24px;
  height: 24px;
  border: 3px solid var(--gray-200);
  border-top-color: var(--joe-orange);
  border-radius: var(--radius-full);
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-overlay {
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: var(--space-12);
  color: var(--gray-400);
}

.empty-state-icon {
  width: 64px;
  height: 64px;
  margin: 0 auto var(--space-4);
  opacity: 0.5;
}

.empty-state-title {
  font-weight: 600;
  color: var(--gray-600);
  margin-bottom: var(--space-2);
}

.empty-state-text {
  font-size: 0.875rem;
  max-width: 300px;
  margin: 0 auto;
}

/* Avatar Group */
.avatar-group {
  display: flex;
}

.avatar-group .user-avatar {
  margin-left: -8px;
  border: 2px solid white;
}

.avatar-group .user-avatar:first-child {
  margin-left: 0;
}

/* Dropdown */
.dropdown {
  position: relative;
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  min-width: 180px;
  padding: var(--space-2);
  z-index: var(--z-dropdown);
  opacity: 0;
  visibility: hidden;
  transform: translateY(-8px);
  transition: all var(--transition-fast);
}

.dropdown.open .dropdown-menu {
  opacity: 1;
  visibility: visible;
  transform: translateY(4px);
}

.dropdown-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  font-size: 0.875rem;
  color: var(--gray-700);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.dropdown-item:hover {
  background: var(--gray-100);
}

.dropdown-item.danger {
  color: var(--error);
}

.dropdown-divider {
  height: 1px;
  background: var(--gray-200);
  margin: var(--space-2) 0;
}

/* Tooltip */
[data-tooltip] {
  position: relative;
}

[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--gray-900);
  color: white;
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-md);
  font-size: 0.75rem;
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: all var(--transition-fast);
  margin-bottom: var(--space-1);
}

[data-tooltip]:hover::after {
  opacity: 1;
  visibility: visible;
}
/* ============================================
   DEAL DETAIL PAGE STYLES
   ============================================ */

/* Deal Detail Container */
.deal-detail {
  max-width: 1200px;
  margin: 0 auto;
}

/* Deal Header */
.deal-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: var(--space-4) 0;
  margin-bottom: var(--space-4);
  border-bottom: 1px solid var(--gray-200);
}

.deal-header-left {
  display: flex;
  align-items: flex-start;
  gap: var(--space-4);
}

.deal-title-section h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--gray-900);
  margin: 0 0 var(--space-1) 0;
}

.deal-company {
  font-size: 0.875rem;
  color: var(--gray-500);
}

.deal-company a {
  color: var(--joe-orange);
  text-decoration: none;
}

.deal-company a:hover {
  text-decoration: underline;
}

.deal-header-right {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.deal-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--success);
}

.stage-select {
  padding: var(--space-2) var(--space-4);
  border: 2px solid var(--joe-orange);
  border-radius: var(--radius-lg);
  background: var(--joe-orange-light);
  color: var(--joe-orange-dark);
  font-weight: 600;
  font-size: 0.875rem;
  cursor: pointer;
}

/* Stage Progress Bar */
.stage-progress {
  display: flex;
  gap: var(--space-1);
  padding: var(--space-4) 0;
  margin-bottom: var(--space-4);
  overflow-x: auto;
}

.stage-step {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--gray-100);
  border-radius: var(--radius-lg);
  font-size: 0.75rem;
  color: var(--gray-500);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.stage-step:hover {
  background: var(--gray-200);
}

.stage-step.current {
  background: var(--stage-color, var(--joe-orange));
  color: white;
}

.stage-step.completed {
  background: var(--success-light);
  color: var(--success);
}

.stage-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: currentColor;
}

/* Deal Tabs */
.deal-tabs {
  display: flex;
  gap: var(--space-1);
  border-bottom: 1px solid var(--gray-200);
  margin-bottom: var(--space-4);
}

.deal-tab {
  padding: var(--space-3) var(--space-4);
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--gray-500);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.deal-tab:hover {
  color: var(--gray-700);
}

.deal-tab.active {
  color: var(--joe-orange);
  border-bottom-color: var(--joe-orange);
}

/* Deal Tab Content */
.deal-content {
  min-height: 400px;
}

.deal-tab-content {
  display: none;
}

.deal-tab-content.active {
  display: block;
}

/* Overview Grid */
.overview-grid {
  display: grid;
  grid-template-columns: 1fr 360px;
  gap: var(--space-6);
}

@media (max-width: 1024px) {
  .overview-grid {
    grid-template-columns: 1fr;
  }
}

.overview-main {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.overview-sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

/* Cards */
.card {
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-xl);
  overflow: hidden;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-4);
  border-bottom: 1px solid var(--gray-100);
}

.card-header h3 {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--gray-700);
  margin: 0;
}

.card-body {
  padding: var(--space-4);
}

/* Quick Actions */
.quick-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.quick-actions .btn {
  flex: 1;
  min-width: 120px;
  justify-content: center;
}

/* Activity List */
.activity-list {
  display: flex;
  flex-direction: column;
}

.activity-timeline {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.activity-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
}

/* Task List */
.task-list {
  display: flex;
  flex-direction: column;
}

.tasks-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--space-4);
}

.tasks-section {
  margin-bottom: var(--space-4);
}

.tasks-section h4 {
  font-size: 0.813rem;
  font-weight: 600;
  color: var(--gray-500);
  margin-bottom: var(--space-2);
}

.task-list.completed .task-item {
  opacity: 0.6;
}

.task-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
}

.task-item:hover {
  background: var(--gray-50);
}

.task-item.high-priority {
  border-left: 3px solid var(--error);
}

.task-item input[type="checkbox"] {
  width: 18px;
  height: 18px;
  margin-top: 2px;
  accent-color: var(--joe-orange);
}

.task-info {
  flex: 1;
}

.task-title {
  font-weight: 500;
  color: var(--gray-900);
}

.task-meta {
  font-size: 0.75rem;
  color: var(--gray-500);
  margin-top: var(--space-1);
}

/* Contacts Grid */
.contacts-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--space-4);
}

.contacts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--space-4);
}

.contact-card-large {
  display: flex;
  gap: var(--space-4);
  padding: var(--space-4);
  background: var(--gray-50);
  border-radius: var(--radius-xl);
}

.contact-avatar-large {
  width: 56px;
  height: 56px;
  border-radius: var(--radius-full);
  background: var(--joe-orange);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 1.125rem;
  flex-shrink: 0;
}

.contact-details {
  flex: 1;
}

.contact-name {
  font-weight: 600;
  color: var(--gray-900);
}

.contact-title {
  font-size: 0.813rem;
  color: var(--gray-500);
}

.contact-role {
  font-size: 0.75rem;
  color: var(--joe-orange);
  margin-top: var(--space-1);
}

.contact-actions {
  display: flex;
  gap: var(--space-1);
  margin-top: var(--space-2);
}

/* Contact Card (small) */
.contact-card {
  display: flex;
  gap: var(--space-3);
  align-items: center;
}

.contact-avatar {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: var(--joe-orange);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.875rem;
}

.contact-info {
  flex: 1;
}

.contact-info a {
  display: block;
  font-size: 0.813rem;
  color: var(--joe-orange);
  text-decoration: none;
}

.contact-info a:hover {
  text-decoration: underline;
}

/* Detail Rows */
.detail-row {
  display: flex;
  justify-content: space-between;
  padding: var(--space-2) 0;
  border-bottom: 1px solid var(--gray-100);
}

.detail-row:last-child {
  border-bottom: none;
}

.detail-row label {
  font-size: 0.813rem;
  color: var(--gray-500);
}

.detail-row span {
  font-size: 0.875rem;
  color: var(--gray-900);
  font-weight: 500;
}

/* Sales/Onboarding/Success Content */
.sales-content,
.onboarding-content,
.success-content {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-4);
}

/* ICP Score */
.icp-score {
  text-align: center;
  padding: var(--space-4);
}

.score-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--joe-orange);
}

/* Health Score */
.health-score {
  text-align: center;
  padding: var(--space-4);
}

.score-circle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: var(--success-light);
  color: var(--success);
  font-size: 1.5rem;
  font-weight: 700;
}

/* Checklist */
.checklist {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.checklist-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-2);
  border-radius: var(--radius-lg);
  cursor: pointer;
}

.checklist-item:hover {
  background: var(--gray-50);
}

.checklist-item input {
  width: 18px;
  height: 18px;
  accent-color: var(--success);
}

/* Stage Badge */
.stage-badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  font-weight: 600;
  color: white;
}

/* Clickable Row */
.clickable-row {
  cursor: pointer;
}

.clickable-row:hover {
  background: var(--gray-50);
}

/* Pipeline Board Enhancements */
.pipeline-card {
  cursor: pointer;
  transition: all var(--transition-fast);
}

.pipeline-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

/* New Deal Modal */
.new-deal-form {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-4);
}

@media (max-width: 600px) {
  .form-row {
    grid-template-columns: 1fr;
  }
}

/* Company Search in Modal */
.company-search-wrapper {
  position: relative;
}

.company-search-results {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  max-height: 200px;
  overflow-y: auto;
  z-index: 10;
  box-shadow: var(--shadow-lg);
}

.company-search-item {
  padding: var(--space-3);
  cursor: pointer;
  border-bottom: 1px solid var(--gray-100);
}

.company-search-item:hover {
  background: var(--gray-50);
}

.company-search-item:last-child {
  border-bottom: none;
}

.company-search-item .company-name {
  font-weight: 500;
}

.company-search-item .company-location {
  font-size: 0.75rem;
  color: var(--gray-500);
}

/* Text Muted */
.text-muted {
  color: var(--gray-500);
}

/* Empty Icon */
.empty-icon {
  font-size: 3rem;
  margin-bottom: var(--space-4);
}

/* Fix Lucide Icons in Buttons */
.btn i[data-lucide],
.btn svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.btn-sm i[data-lucide],
.btn-sm svg {
  width: 14px;
  height: 14px;
}

/* Nav Badge */
.nav-badge {
  background: var(--joe-orange);
  color: white;
  font-size: 0.688rem;
  font-weight: 600;
  padding: 0.125rem 0.375rem;
  border-radius: var(--radius-full);
  margin-left: auto;
}

.nav-badge.hidden {
  display: none;
}

/* User Avatar Fix */
.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  object-fit: cover;
  background: var(--gray-200);
}

/* Pipeline Header */
.pipeline-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
  flex-wrap: wrap;
  gap: var(--space-4);
}

.pipeline-tabs {
  display: flex;
  gap: var(--space-2);
}

.pipeline-tab {
  padding: var(--space-2) var(--space-4);
  background: var(--gray-100);
  border: none;
  border-radius: var(--radius-lg);
  font-weight: 500;
  color: var(--gray-600);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.pipeline-tab:hover {
  background: var(--gray-200);
}

.pipeline-tab.active {
  background: var(--joe-orange);
  color: white;
}

.pipeline-filters {
  display: flex;
  gap: var(--space-3);
}

/* Pipeline Board */
.pipeline-board {
  display: flex;
  gap: var(--space-4);
  overflow-x: auto;
  padding-bottom: var(--space-4);
}

.pipeline-column {
  flex: 0 0 280px;
  background: var(--gray-50);
  border-radius: var(--radius-xl);
  padding: var(--space-4);
}

.pipeline-column-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
}

.pipeline-column-title {
  font-weight: 600;
  font-size: 0.875rem;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.pipeline-column-count {
  background: var(--gray-200);
  padding: 0.125rem 0.5rem;
  border-radius: var(--radius-full);
  font-size: 0.75rem;
}

.pipeline-column-value {
  font-size: 0.75rem;
  color: var(--gray-500);
}

.pipeline-cards {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  min-height: 100px;
}

/* Form Textarea */
.form-textarea {
  width: 100%;
  min-height: 100px;
  padding: var(--space-3);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  font-family: inherit;
  font-size: 0.875rem;
  resize: vertical;
}

.form-textarea:focus {
  outline: none;
  border-color: var(--joe-orange);
  box-shadow: 0 0 0 3px var(--joe-orange-light);
}
/* ============================================
   DEAL DETAIL PAGE STYLES
   ============================================ */

/* Deal Detail Container */
.deal-detail {
  max-width: 1200px;
  margin: 0 auto;
}

/* Deal Header */
.deal-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: var(--space-4) 0;
  margin-bottom: var(--space-4);
  border-bottom: 1px solid var(--gray-200);
}

.deal-header-left {
  display: flex;
  align-items: flex-start;
  gap: var(--space-4);
}

.deal-title-section h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--gray-900);
  margin: 0 0 var(--space-1) 0;
}

.deal-company {
  font-size: 0.875rem;
  color: var(--gray-500);
}

.deal-company a {
  color: var(--joe-orange);
  text-decoration: none;
}

.deal-company a:hover {
  text-decoration: underline;
}

.deal-header-right {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.deal-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--success);
}

.stage-select {
  padding: var(--space-2) var(--space-4);
  border: 2px solid var(--joe-orange);
  border-radius: var(--radius-lg);
  background: var(--joe-orange-light);
  color: var(--joe-orange-dark);
  font-weight: 600;
  font-size: 0.875rem;
  cursor: pointer;
}

/* Stage Progress Bar */
.stage-progress {
  display: flex;
  gap: var(--space-1);
  padding: var(--space-4) 0;
  margin-bottom: var(--space-4);
  overflow-x: auto;
}

.stage-step {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--gray-100);
  border-radius: var(--radius-lg);
  font-size: 0.75rem;
  color: var(--gray-500);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.stage-step:hover {
  background: var(--gray-200);
}

.stage-step.current {
  background: var(--stage-color, var(--joe-orange));
  color: white;
}

.stage-step.completed {
  background: var(--success-light);
  color: var(--success);
}

.stage-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: currentColor;
}

/* Deal Tabs */
.deal-tabs {
  display: flex;
  gap: var(--space-1);
  border-bottom: 1px solid var(--gray-200);
  margin-bottom: var(--space-4);
}

.deal-tab {
  padding: var(--space-3) var(--space-4);
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--gray-500);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.deal-tab:hover {
  color: var(--gray-700);
}

.deal-tab.active {
  color: var(--joe-orange);
  border-bottom-color: var(--joe-orange);
}

/* Deal Tab Content */
.deal-content {
  min-height: 400px;
}

.deal-tab-content {
  display: none;
}

.deal-tab-content.active {
  display: block;
}

/* Overview Grid */
.overview-grid {
  display: grid;
  grid-template-columns: 1fr 360px;
  gap: var(--space-6);
}

@media (max-width: 1024px) {
  .overview-grid {
    grid-template-columns: 1fr;
  }
}

.overview-main {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.overview-sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

/* Cards */
.card {
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-xl);
  overflow: hidden;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-4);
  border-bottom: 1px solid var(--gray-100);
}

.card-header h3 {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--gray-700);
  margin: 0;
}

.card-body {
  padding: var(--space-4);
}

/* Quick Actions */
.quick-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.quick-actions .btn {
  flex: 1;
  min-width: 120px;
  justify-content: center;
}

/* Activity List */
.activity-list {
  display: flex;
  flex-direction: column;
}

.activity-timeline {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.activity-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
}

/* Task List */
.task-list {
  display: flex;
  flex-direction: column;
}

.tasks-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--space-4);
}

.tasks-section {
  margin-bottom: var(--space-4);
}

.tasks-section h4 {
  font-size: 0.813rem;
  font-weight: 600;
  color: var(--gray-500);
  margin-bottom: var(--space-2);
}

.task-list.completed .task-item {
  opacity: 0.6;
}

.task-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
}

.task-item:hover {
  background: var(--gray-50);
}

.task-item.high-priority {
  border-left: 3px solid var(--error);
}

.task-item input[type="checkbox"] {
  width: 18px;
  height: 18px;
  margin-top: 2px;
  accent-color: var(--joe-orange);
}

.task-info {
  flex: 1;
}

.task-title {
  font-weight: 500;
  color: var(--gray-900);
}

.task-meta {
  font-size: 0.75rem;
  color: var(--gray-500);
  margin-top: var(--space-1);
}

/* Contacts Grid */
.contacts-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--space-4);
}

.contacts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--space-4);
}

.contact-card-large {
  display: flex;
  gap: var(--space-4);
  padding: var(--space-4);
  background: var(--gray-50);
  border-radius: var(--radius-xl);
}

.contact-avatar-large {
  width: 56px;
  height: 56px;
  border-radius: var(--radius-full);
  background: var(--joe-orange);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 1.125rem;
  flex-shrink: 0;
}

.contact-details {
  flex: 1;
}

.contact-name {
  font-weight: 600;
  color: var(--gray-900);
}

.contact-title {
  font-size: 0.813rem;
  color: var(--gray-500);
}

.contact-role {
  font-size: 0.75rem;
  color: var(--joe-orange);
  margin-top: var(--space-1);
}

.contact-actions {
  display: flex;
  gap: var(--space-1);
  margin-top: var(--space-2);
}

/* Contact Card (small) */
.contact-card {
  display: flex;
  gap: var(--space-3);
  align-items: center;
}

.contact-avatar {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: var(--joe-orange);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.875rem;
}

.contact-info {
  flex: 1;
}

.contact-info a {
  display: block;
  font-size: 0.813rem;
  color: var(--joe-orange);
  text-decoration: none;
}

.contact-info a:hover {
  text-decoration: underline;
}

/* Detail Rows */
.detail-row {
  display: flex;
  justify-content: space-between;
  padding: var(--space-2) 0;
  border-bottom: 1px solid var(--gray-100);
}

.detail-row:last-child {
  border-bottom: none;
}

.detail-row label {
  font-size: 0.813rem;
  color: var(--gray-500);
}

.detail-row span {
  font-size: 0.875rem;
  color: var(--gray-900);
  font-weight: 500;
}

/* Sales/Onboarding/Success Content */
.sales-content,
.onboarding-content,
.success-content {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-4);
}

/* ICP Score */
.icp-score {
  text-align: center;
  padding: var(--space-4);
}

.score-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--joe-orange);
}

/* Health Score */
.health-score {
  text-align: center;
  padding: var(--space-4);
}

.score-circle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: var(--success-light);
  color: var(--success);
  font-size: 1.5rem;
  font-weight: 700;
}

/* Checklist */
.checklist {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.checklist-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-2);
  border-radius: var(--radius-lg);
  cursor: pointer;
}

.checklist-item:hover {
  background: var(--gray-50);
}

.checklist-item input {
  width: 18px;
  height: 18px;
  accent-color: var(--success);
}

/* Stage Badge */
.stage-badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  font-weight: 600;
  color: white;
}

/* Clickable Row */
.clickable-row {
  cursor: pointer;
}

.clickable-row:hover {
  background: var(--gray-50);
}

/* Pipeline Board Enhancements */
.pipeline-card {
  cursor: pointer;
  transition: all var(--transition-fast);
}

.pipeline-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

/* New Deal Modal */
.new-deal-form {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-4);
}

@media (max-width: 600px) {
  .form-row {
    grid-template-columns: 1fr;
  }
}

/* Company Search in Modal */
.company-search-wrapper {
  position: relative;
}

.company-search-results {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  max-height: 200px;
  overflow-y: auto;
  z-index: 10;
  box-shadow: var(--shadow-lg);
}

.company-search-item {
  padding: var(--space-3);
  cursor: pointer;
  border-bottom: 1px solid var(--gray-100);
}

.company-search-item:hover {
  background: var(--gray-50);
}

.company-search-item:last-child {
  border-bottom: none;
}

.company-search-item .company-name {
  font-weight: 500;
}

.company-search-item .company-location {
  font-size: 0.75rem;
  color: var(--gray-500);
}

/* Text Muted */
.text-muted {
  color: var(--gray-500);
}

/* Empty Icon */
.empty-icon {
  font-size: 3rem;
  margin-bottom: var(--space-4);
}

/* Fix Lucide Icons in Buttons */
.btn i[data-lucide],
.btn svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.btn-sm i[data-lucide],
.btn-sm svg {
  width: 14px;
  height: 14px;
}

/* Nav Badge */
.nav-badge {
  background: var(--joe-orange);
  color: white;
  font-size: 0.688rem;
  font-weight: 600;
  padding: 0.125rem 0.375rem;
  border-radius: var(--radius-full);
  margin-left: auto;
}

.nav-badge.hidden {
  display: none;
}

/* User Avatar Fix */
.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  object-fit: cover;
  background: var(--gray-200);
}

/* Pipeline Header */
.pipeline-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
  flex-wrap: wrap;
  gap: var(--space-4);
}

.pipeline-tabs {
  display: flex;
  gap: var(--space-2);
}

.pipeline-tab {
  padding: var(--space-2) var(--space-4);
  background: var(--gray-100);
  border: none;
  border-radius: var(--radius-lg);
  font-weight: 500;
  color: var(--gray-600);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.pipeline-tab:hover {
  background: var(--gray-200);
}

.pipeline-tab.active {
  background: var(--joe-orange);
  color: white;
}

.pipeline-filters {
  display: flex;
  gap: var(--space-3);
}

/* Pipeline Board */
.pipeline-board {
  display: flex;
  gap: var(--space-4);
  overflow-x: auto;
  padding-bottom: var(--space-4);
}

.pipeline-column {
  flex: 0 0 280px;
  background: var(--gray-50);
  border-radius: var(--radius-xl);
  padding: var(--space-4);
}

.pipeline-column-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
}

.pipeline-column-title {
  font-weight: 600;
  font-size: 0.875rem;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.pipeline-column-count {
  background: var(--gray-200);
  padding: 0.125rem 0.5rem;
  border-radius: var(--radius-full);
  font-size: 0.75rem;
}

.pipeline-column-value {
  font-size: 0.75rem;
  color: var(--gray-500);
}

.pipeline-cards {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  min-height: 100px;
}

/* Form Textarea */
.form-textarea {
  width: 100%;
  min-height: 100px;
  padding: var(--space-3);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  font-family: inherit;
  font-size: 0.875rem;
  resize: vertical;
}

.form-textarea:focus {
  outline: none;
  border-color: var(--joe-orange);
  box-shadow: 0 0 0 3px var(--joe-orange-light);
}
/* ============================================
   COMPANY & CONTACT DETAIL STYLES
   ============================================ */

/* Shared Header Styles */
.company-detail,
.contact-detail {
  max-width: 1200px;
  margin: 0 auto;
}

.company-header,
.contact-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: var(--space-4) 0;
  margin-bottom: var(--space-4);
  border-bottom: 1px solid var(--gray-200);
  flex-wrap: wrap;
  gap: var(--space-4);
}

.company-header-left,
.contact-header-left {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.company-header-right,
.contact-header-right {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.company-title-section h1,
.contact-title-section h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--gray-900);
  margin: 0 0 var(--space-1) 0;
}

.company-location,
.contact-subtitle {
  font-size: 0.875rem;
  color: var(--gray-500);
}

.company-location a,
.contact-subtitle a {
  color: var(--joe-orange);
  text-decoration: none;
}

.company-website {
  margin-left: var(--space-2);
}

/* Contact Avatar XL */
.contact-avatar-xl {
  width: 64px;
  height: 64px;
  border-radius: var(--radius-full);
  background: var(--joe-orange);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  font-weight: 600;
  flex-shrink: 0;
}

/* Stats Row */
.company-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: var(--space-4);
  margin-bottom: var(--space-6);
}

/* Tabs */
.company-tabs,
.contact-tabs {
  display: flex;
  gap: var(--space-1);
  border-bottom: 1px solid var(--gray-200);
  margin-bottom: var(--space-4);
}

.company-tab,
.contact-tab {
  padding: var(--space-3) var(--space-4);
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--gray-500);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.company-tab:hover,
.contact-tab:hover {
  color: var(--gray-700);
}

.company-tab.active,
.contact-tab.active {
  color: var(--joe-orange);
  border-bottom-color: var(--joe-orange);
}

/* Tab Content */
.company-content,
.contact-content {
  min-height: 400px;
}

.company-tab-content,
.contact-tab-content {
  display: none;
}

.company-tab-content.active,
.contact-tab-content.active {
  display: block;
}

/* Mini Deal Card */
.mini-deal-card {
  padding: var(--space-3);
  background: var(--gray-50);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-2);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.mini-deal-card:hover {
  background: var(--gray-100);
}

.mini-deal-name {
  font-weight: 500;
  margin-bottom: var(--space-1);
}

.mini-deal-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.75rem;
}

.mini-deal-value {
  color: var(--success);
  font-weight: 600;
}

/* Contact Cell in Table */
.contact-cell {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.contact-avatar-sm {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-full);
  background: var(--joe-orange);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.688rem;
  font-weight: 600;
  flex-shrink: 0;
}

/* Deals/Contacts Header */
.deals-header,
.contacts-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--space-4);
}

/* ============================================
   AI BRIEFING CHAT STYLES
   ============================================ */

.ai-briefing-summary {
  background: var(--gray-50);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  margin-bottom: var(--space-4);
}

.ai-briefing-summary p {
  margin: 0 0 var(--space-2) 0;
  font-size: 0.875rem;
  line-height: 1.5;
}

.ai-briefing-summary p:last-child {
  margin-bottom: 0;
}

/* AI Prompts */
.ai-prompts {
  margin-bottom: var(--space-4);
}

.ai-prompts-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--gray-500);
  margin-bottom: var(--space-2);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.ai-prompt-chips {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.ai-prompt-chip {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-2) var(--space-3);
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-full);
  font-size: 0.813rem;
  color: var(--gray-700);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.ai-prompt-chip:hover {
  background: var(--joe-orange-light);
  border-color: var(--joe-orange);
  color: var(--joe-orange-dark);
}

/* AI Chat Container */
.ai-chat-container {
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-xl);
  overflow: hidden;
}

.ai-chat-messages {
  max-height: 300px;
  overflow-y: auto;
  padding: var(--space-4);
}

.ai-message {
  display: flex;
  gap: var(--space-3);
  margin-bottom: var(--space-4);
}

.ai-message:last-child {
  margin-bottom: 0;
}

.ai-message-avatar {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  background: var(--gray-100);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  flex-shrink: 0;
}

.ai-message.assistant .ai-message-avatar {
  background: var(--joe-orange-light);
}

.ai-message-content {
  flex: 1;
  padding: var(--space-3);
  background: var(--gray-50);
  border-radius: var(--radius-lg);
  font-size: 0.875rem;
  line-height: 1.5;
}

.ai-message.user .ai-message-content {
  background: var(--joe-orange-light);
}

.ai-message.loading .ai-message-content {
  color: var(--gray-500);
  font-style: italic;
}

/* AI Chat Input */
.ai-chat-input {
  display: flex;
  gap: var(--space-2);
  padding: var(--space-3);
  border-top: 1px solid var(--gray-200);
  background: var(--gray-50);
}

.ai-chat-input input {
  flex: 1;
  padding: var(--space-2) var(--space-3);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  font-size: 0.875rem;
}

.ai-chat-input input:focus {
  outline: none;
  border-color: var(--joe-orange);
}

.ai-chat-input .btn {
  padding: var(--space-2) var(--space-3);
}

/* ============================================
   ADDITIONAL COMPONENT FIXES
   ============================================ */

/* Activity Item Improvements */
.activity-item {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-3) 0;
  border-bottom: 1px solid var(--gray-100);
}

.activity-item:last-child {
  border-bottom: none;
}

.activity-icon {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  background: var(--gray-100);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.activity-icon svg,
.activity-icon i {
  width: 16px;
  height: 16px;
  color: var(--gray-500);
}

.activity-icon.call { background: var(--success-light); }
.activity-icon.call svg { color: var(--success); }
.activity-icon.email { background: var(--info-light); }
.activity-icon.email svg { color: var(--info); }
.activity-icon.meeting { background: var(--warning-light); }
.activity-icon.meeting svg { color: var(--warning); }
.activity-icon.note { background: var(--gray-200); }

.activity-content {
  flex: 1;
  min-width: 0;
}

.activity-header-text {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-1);
}

.activity-type {
  font-weight: 500;
  text-transform: capitalize;
  font-size: 0.813rem;
}

.activity-time {
  font-size: 0.75rem;
  color: var(--gray-400);
}

.activity-subject {
  font-weight: 500;
  margin-bottom: var(--space-1);
}

.activity-body {
  font-size: 0.813rem;
  color: var(--gray-600);
  line-height: 1.5;
}

/* Deal Card Improvements */
.deal-card {
  padding: var(--space-4);
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-xl);
  margin-bottom: var(--space-3);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.deal-card:hover {
  border-color: var(--joe-orange);
  box-shadow: var(--shadow-md);
}

.deal-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--space-2);
}

.deal-card-title {
  font-weight: 600;
  color: var(--gray-900);
}

.deal-card-value {
  font-weight: 700;
  color: var(--success);
}

.deal-card-company {
  font-size: 0.813rem;
  color: var(--gray-500);
  margin-bottom: var(--space-3);
}

.deal-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.deal-card-owner {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: 0.813rem;
  color: var(--gray-500);
}

.deal-card-owner img {
  width: 20px;
  height: 20px;
  border-radius: var(--radius-full);
}

.deal-card-days {
  font-size: 0.75rem;
  color: var(--gray-400);
}

/* Pipeline Card Styles */
.pipeline-card {
  padding: var(--space-3);
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.pipeline-card:hover {
  border-color: var(--joe-orange);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.pipeline-card.dragging {
  opacity: 0.5;
}

/* Stat Card Improvements */
.stat-card {
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-xl);
  padding: var(--space-4);
}

.stat-card-label {
  font-size: 0.75rem;
  color: var(--gray-500);
  margin-bottom: var(--space-1);
}

.stat-card-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--gray-900);
}

.stat-card-change {
  font-size: 0.75rem;
  margin-top: var(--space-1);
}

.stat-card-change.positive {
  color: var(--success);
}

.stat-card-change.negative {
  color: var(--error);
}

/* Badge */
.badge {
  display: inline-block;
  padding: 0.125rem 0.5rem;
  border-radius: var(--radius-full);
  font-size: 0.688rem;
  font-weight: 600;
  background: var(--gray-200);
  color: var(--gray-700);
}

.badge-green { background: var(--success-light); color: var(--success); }
.badge-red { background: var(--error-light); color: var(--error); }
.badge-yellow { background: var(--warning-light); color: var(--warning); }
.badge-blue { background: var(--info-light); color: var(--info); }
.badge-orange { background: var(--joe-orange-light); color: var(--joe-orange-dark); }
.badge-gray { background: var(--gray-200); color: var(--gray-600); }

/* Table Improvements */
.data-table {
  width: 100%;
  border-collapse: collapse;
}

.data-table th {
  text-align: left;
  padding: var(--space-3);
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--gray-500);
  border-bottom: 1px solid var(--gray-200);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.data-table td {
  padding: var(--space-3);
  border-bottom: 1px solid var(--gray-100);
  font-size: 0.875rem;
}

.data-table tbody tr:hover {
  background: var(--gray-50);
}

.clickable-row {
  cursor: pointer;
}

/* Contact Quick Actions */
.contact-quick-actions {
  display: flex;
  gap: var(--space-2);
}
/* ============================================
   DEAL DETAIL PAGE STYLES
   ============================================ */

/* Deal Detail Container */
.deal-detail {
  max-width: 1200px;
  margin: 0 auto;
}

/* Deal Header */
.deal-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: var(--space-4) 0;
  margin-bottom: var(--space-4);
  border-bottom: 1px solid var(--gray-200);
}

.deal-header-left {
  display: flex;
  align-items: flex-start;
  gap: var(--space-4);
}

.deal-title-section h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--gray-900);
  margin: 0 0 var(--space-1) 0;
}

.deal-company {
  font-size: 0.875rem;
  color: var(--gray-500);
}

.deal-company a {
  color: var(--joe-orange);
  text-decoration: none;
}

.deal-company a:hover {
  text-decoration: underline;
}

.deal-header-right {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.deal-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--success);
}

.stage-select {
  padding: var(--space-2) var(--space-4);
  border: 2px solid var(--joe-orange);
  border-radius: var(--radius-lg);
  background: var(--joe-orange-light);
  color: var(--joe-orange-dark);
  font-weight: 600;
  font-size: 0.875rem;
  cursor: pointer;
}

/* Stage Progress Bar */
.stage-progress {
  display: flex;
  gap: var(--space-1);
  padding: var(--space-4) 0;
  margin-bottom: var(--space-4);
  overflow-x: auto;
}

.stage-step {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--gray-100);
  border-radius: var(--radius-lg);
  font-size: 0.75rem;
  color: var(--gray-500);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.stage-step:hover {
  background: var(--gray-200);
}

.stage-step.current {
  background: var(--stage-color, var(--joe-orange));
  color: white;
}

.stage-step.completed {
  background: var(--success-light);
  color: var(--success);
}

.stage-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: currentColor;
}

/* Deal Tabs */
.deal-tabs {
  display: flex;
  gap: var(--space-1);
  border-bottom: 1px solid var(--gray-200);
  margin-bottom: var(--space-4);
}

.deal-tab {
  padding: var(--space-3) var(--space-4);
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--gray-500);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.deal-tab:hover {
  color: var(--gray-700);
}

.deal-tab.active {
  color: var(--joe-orange);
  border-bottom-color: var(--joe-orange);
}

/* Deal Tab Content */
.deal-content {
  min-height: 400px;
}

.deal-tab-content {
  display: none;
}

.deal-tab-content.active {
  display: block;
}

/* Overview Grid */
.overview-grid {
  display: grid;
  grid-template-columns: 1fr 360px;
  gap: var(--space-6);
}

@media (max-width: 1024px) {
  .overview-grid {
    grid-template-columns: 1fr;
  }
}

.overview-main {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.overview-sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

/* Cards */
.card {
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-xl);
  overflow: hidden;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-4);
  border-bottom: 1px solid var(--gray-100);
}

.card-header h3 {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--gray-700);
  margin: 0;
}

.card-body {
  padding: var(--space-4);
}

/* Quick Actions */
.quick-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.quick-actions .btn {
  flex: 1;
  min-width: 120px;
  justify-content: center;
}

/* Activity List */
.activity-list {
  display: flex;
  flex-direction: column;
}

.activity-timeline {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.activity-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
}

/* Task List */
.task-list {
  display: flex;
  flex-direction: column;
}

.tasks-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--space-4);
}

.tasks-section {
  margin-bottom: var(--space-4);
}

.tasks-section h4 {
  font-size: 0.813rem;
  font-weight: 600;
  color: var(--gray-500);
  margin-bottom: var(--space-2);
}

.task-list.completed .task-item {
  opacity: 0.6;
}

.task-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
}

.task-item:hover {
  background: var(--gray-50);
}

.task-item.high-priority {
  border-left: 3px solid var(--error);
}

.task-item input[type="checkbox"] {
  width: 18px;
  height: 18px;
  margin-top: 2px;
  accent-color: var(--joe-orange);
}

.task-info {
  flex: 1;
}

.task-title {
  font-weight: 500;
  color: var(--gray-900);
}

.task-meta {
  font-size: 0.75rem;
  color: var(--gray-500);
  margin-top: var(--space-1);
}

/* Contacts Grid */
.contacts-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--space-4);
}

.contacts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--space-4);
}

.contact-card-large {
  display: flex;
  gap: var(--space-4);
  padding: var(--space-4);
  background: var(--gray-50);
  border-radius: var(--radius-xl);
}

.contact-avatar-large {
  width: 56px;
  height: 56px;
  border-radius: var(--radius-full);
  background: var(--joe-orange);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 1.125rem;
  flex-shrink: 0;
}

.contact-details {
  flex: 1;
}

.contact-name {
  font-weight: 600;
  color: var(--gray-900);
}

.contact-title {
  font-size: 0.813rem;
  color: var(--gray-500);
}

.contact-role {
  font-size: 0.75rem;
  color: var(--joe-orange);
  margin-top: var(--space-1);
}

.contact-actions {
  display: flex;
  gap: var(--space-1);
  margin-top: var(--space-2);
}

/* Contact Card (small) */
.contact-card {
  display: flex;
  gap: var(--space-3);
  align-items: center;
}

.contact-avatar {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  background: var(--joe-orange);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.875rem;
}

.contact-info {
  flex: 1;
}

.contact-info a {
  display: block;
  font-size: 0.813rem;
  color: var(--joe-orange);
  text-decoration: none;
}

.contact-info a:hover {
  text-decoration: underline;
}

/* Detail Rows */
.detail-row {
  display: flex;
  justify-content: space-between;
  padding: var(--space-2) 0;
  border-bottom: 1px solid var(--gray-100);
}

.detail-row:last-child {
  border-bottom: none;
}

.detail-row label {
  font-size: 0.813rem;
  color: var(--gray-500);
}

.detail-row span {
  font-size: 0.875rem;
  color: var(--gray-900);
  font-weight: 500;
}

/* Sales/Onboarding/Success Content */
.sales-content,
.onboarding-content,
.success-content {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-4);
}

/* ICP Score */
.icp-score {
  text-align: center;
  padding: var(--space-4);
}

.score-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--joe-orange);
}

/* Health Score */
.health-score {
  text-align: center;
  padding: var(--space-4);
}

.score-circle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: var(--success-light);
  color: var(--success);
  font-size: 1.5rem;
  font-weight: 700;
}

/* Checklist */
.checklist {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.checklist-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-2);
  border-radius: var(--radius-lg);
  cursor: pointer;
}

.checklist-item:hover {
  background: var(--gray-50);
}

.checklist-item input {
  width: 18px;
  height: 18px;
  accent-color: var(--success);
}

/* Stage Badge */
.stage-badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  font-weight: 600;
  color: white;
}

/* Clickable Row */
.clickable-row {
  cursor: pointer;
}

.clickable-row:hover {
  background: var(--gray-50);
}

/* Pipeline Board Enhancements */
.pipeline-card {
  cursor: pointer;
  transition: all var(--transition-fast);
}

.pipeline-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

/* New Deal Modal */
.new-deal-form {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-4);
}

@media (max-width: 600px) {
  .form-row {
    grid-template-columns: 1fr;
  }
}

/* Company Search in Modal */
.company-search-wrapper {
  position: relative;
}

.company-search-results {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  max-height: 200px;
  overflow-y: auto;
  z-index: 10;
  box-shadow: var(--shadow-lg);
}

.company-search-item {
  padding: var(--space-3);
  cursor: pointer;
  border-bottom: 1px solid var(--gray-100);
}

.company-search-item:hover {
  background: var(--gray-50);
}

.company-search-item:last-child {
  border-bottom: none;
}

.company-search-item .company-name {
  font-weight: 500;
}

.company-search-item .company-location {
  font-size: 0.75rem;
  color: var(--gray-500);
}

/* Text Muted */
.text-muted {
  color: var(--gray-500);
}

/* Empty Icon */
.empty-icon {
  font-size: 3rem;
  margin-bottom: var(--space-4);
}

/* Fix Lucide Icons in Buttons */
.btn i[data-lucide],
.btn svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.btn-sm i[data-lucide],
.btn-sm svg {
  width: 14px;
  height: 14px;
}

/* Nav Badge */
.nav-badge {
  background: var(--joe-orange);
  color: white;
  font-size: 0.688rem;
  font-weight: 600;
  padding: 0.125rem 0.375rem;
  border-radius: var(--radius-full);
  margin-left: auto;
}

.nav-badge.hidden {
  display: none;
}

/* User Avatar Fix */
.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  object-fit: cover;
  background: var(--gray-200);
}

/* Pipeline Header */
.pipeline-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
  flex-wrap: wrap;
  gap: var(--space-4);
}

.pipeline-tabs {
  display: flex;
  gap: var(--space-2);
}

.pipeline-tab {
  padding: var(--space-2) var(--space-4);
  background: var(--gray-100);
  border: none;
  border-radius: var(--radius-lg);
  font-weight: 500;
  color: var(--gray-600);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.pipeline-tab:hover {
  background: var(--gray-200);
}

.pipeline-tab.active {
  background: var(--joe-orange);
  color: white;
}

.pipeline-filters {
  display: flex;
  gap: var(--space-3);
}

/* Pipeline Board */
.pipeline-board {
  display: flex;
  gap: var(--space-4);
  overflow-x: auto;
  padding-bottom: var(--space-4);
}

.pipeline-column {
  flex: 0 0 280px;
  background: var(--gray-50);
  border-radius: var(--radius-xl);
  padding: var(--space-4);
}

.pipeline-column-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
}

.pipeline-column-title {
  font-weight: 600;
  font-size: 0.875rem;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.pipeline-column-count {
  background: var(--gray-200);
  padding: 0.125rem 0.5rem;
  border-radius: var(--radius-full);
  font-size: 0.75rem;
}

.pipeline-column-value {
  font-size: 0.75rem;
  color: var(--gray-500);
}

.pipeline-cards {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  min-height: 100px;
}

/* Form Textarea */
.form-textarea {
  width: 100%;
  min-height: 100px;
  padding: var(--space-3);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  font-family: inherit;
  font-size: 0.875rem;
  resize: vertical;
}

.form-textarea:focus {
  outline: none;
  border-color: var(--joe-orange);
  box-shadow: 0 0 0 3px var(--joe-orange-light);
}
/* ==========================================
   SHOPS MODULE STYLES
   ========================================== */

/* Shops Grid */
.shops-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 16px;
    margin-top: 20px;
}

.shop-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px;
    cursor: pointer;
    transition: all 0.2s;
}

.shop-card:hover {
    border-color: #f97316;
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.15);
    transform: translateY(-2px);
}

.shop-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
}

.shop-card-header h3 {
    font-size: 16px;
    font-weight: 600;
    margin: 0;
    color: #111827;
}

.shop-card-location,
.shop-card-rating {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 6px;
}

.shop-card-location i,
.shop-card-rating i {
    width: 14px;
    height: 14px;
}

.shop-card-rating i {
    color: #fbbf24;
}

/* Shop Detail Page */
.shop-detail {
    max-width: 1200px;
}

.shop-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
}

.shop-header-left {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.shop-title-section h1 {
    font-size: 28px;
    font-weight: 700;
    margin: 0 0 8px 0;
    color: #111827;
}

.shop-subtitle {
    display: flex;
    align-items: center;
    gap: 12px;
    color: #6b7280;
    font-size: 14px;
}

.shop-header-actions {
    display: flex;
    gap: 10px;
}

/* Quick Links Bar */
.quick-links-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 24px;
    padding: 16px;
    background: #f9fafb;
    border-radius: 12px;
}

.quick-link {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    color: #374151;
    font-size: 13px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s;
}

.quick-link:hover {
    border-color: #f97316;
    color: #f97316;
    background: #fff7ed;
}

.quick-link i {
    width: 16px;
    height: 16px;
}

/* Stats Row */
.stats-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 24px;
}

.stat-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px;
    text-align: center;
}

.stat-label {
    display: block;
    font-size: 12px;
    color: #6b7280;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-value {
    display: block;
    font-size: 28px;
    font-weight: 700;
    color: #111827;
}

.stat-value small {
    font-size: 18px;
    color: #fbbf24;
}

.stat-detail {
    display: block;
    font-size: 12px;
    color: #9ca3af;
    margin-top: 2px;
}

/* Shop Tabs */
.shop-tabs {
    display: flex;
    gap: 4px;
    border-bottom: 1px solid #e5e7eb;
    margin-bottom: 24px;
}

.shop-tabs .tab-btn {
    padding: 12px 20px;
    background: none;
    border: none;
    font-size: 14px;
    font-weight: 500;
    color: #6b7280;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all 0.2s;
}

.shop-tabs .tab-btn:hover {
    color: #f97316;
}

.shop-tabs .tab-btn.active {
    color: #f97316;
    border-bottom-color: #f97316;
}

/* Detail Grid */
.detail-grid {
    display: grid;
    grid-template-columns: 1fr 360px;
    gap: 24px;
}

.detail-main {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.detail-sidebar {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* Details Grid (key-value pairs) */
.details-grid {
    display: flex;
    flex-direction: column;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    border-bottom: 1px solid #f3f4f6;
}

.detail-row:last-child {
    border-bottom: none;
}

.detail-label {
    color: #6b7280;
    font-size: 14px;
}

.detail-value {
    color: #111827;
    font-size: 14px;
    font-weight: 500;
    text-align: right;
}

.detail-value a {
    color: #f97316;
    text-decoration: none;
}

.detail-value a:hover {
    text-decoration: underline;
}

.link-icon {
    margin-left: 6px;
}

.link-icon i {
    width: 14px;
    height: 14px;
}

/* Social Links Grid */
.social-links-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    padding: 12px 0;
}

.social-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 12px;
    border-radius: 8px;
    text-decoration: none;
    font-size: 12px;
    transition: all 0.2s;
}

.social-link i {
    width: 24px;
    height: 24px;
}

.social-link.active {
    background: #f0fdf4;
    color: #16a34a;
}

.social-link.active:hover {
    background: #dcfce7;
}

.social-link.inactive {
    background: #f9fafb;
    color: #9ca3af;
}

/* Products List */
.products-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 8px 0;
}

.product-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 8px;
    font-size: 14px;
}

.product-item i {
    width: 18px;
    height: 18px;
}

.product-item.active {
    background: #f0fdf4;
    color: #16a34a;
}

.product-item.inactive {
    background: #f9fafb;
    color: #9ca3af;
}

/* Mini Cards */
.mini-deal-card,
.mini-contact-card {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s;
}

.mini-deal-card:hover,
.mini-contact-card:hover {
    border-color: #f97316;
    background: #fff7ed;
}

.mini-deal-name,
.mini-contact-name {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
    color: #111827;
}

.mini-deal-value {
    font-size: 14px;
    font-weight: 600;
    color: #16a34a;
}

.mini-contact-info {
    flex: 1;
}

.mini-contact-title {
    font-size: 12px;
    color: #6b7280;
}

.empty-mini {
    padding: 16px;
    text-align: center;
    color: #9ca3af;
    font-size: 13px;
}

/* Avatar Sizes */
.avatar-sm {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: linear-gradient(135deg, #f97316 0%, #fb923c 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 600;
    flex-shrink: 0;
}

.avatar-md {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #f97316 0%, #fb923c 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 600;
    flex-shrink: 0;
}

/* Contacts Grid */
.contacts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 12px;
    padding: 12px 0;
}

.contact-card {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
}

.contact-card:hover {
    border-color: #f97316;
    box-shadow: 0 2px 8px rgba(249, 115, 22, 0.1);
}

.contact-card-info {
    flex: 1;
}

.contact-card-name {
    font-size: 15px;
    font-weight: 600;
    color: #111827;
}

.contact-card-title {
    font-size: 13px;
    color: #6b7280;
}

.contact-card-email {
    font-size: 12px;
    color: #9ca3af;
    margin-top: 4px;
}

/* Invoice Preview */
.invoice-preview {
    padding: 8px 0;
}

.invoice-preview .invoice-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 2px solid #f3f4f6;
}

.invoice-preview .invoice-header h2 {
    margin: 0;
    font-size: 24px;
}

.invoice-preview .invoice-details {
    margin-bottom: 24px;
}

.invoice-amount {
    font-size: 20px;
    font-weight: 700;
    color: #16a34a;
}

/* Filter Select */
.filter-select {
    padding: 8px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
    background: white;
    cursor: pointer;
}

.filter-select:focus {
    outline: none;
    border-color: #f97316;
}

/* Form Grid */
.form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.form-grid .form-group {
    margin-bottom: 0;
}

/* Responsive */
@media (max-width: 1024px) {
    .detail-grid {
        grid-template-columns: 1fr;
    }
    
    .stats-row {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .social-links-grid {
        grid-template-columns: repeat(5, 1fr);
    }
}

@media (max-width: 640px) {
    .stats-row {
        grid-template-columns: 1fr;
    }
    
    .quick-links-bar {
        flex-direction: column;
    }
    
    .form-grid {
        grid-template-columns: 1fr;
    }
}
/* ==========================================
   SHOPS DETAIL PAGE FIX
   ========================================== */

/* Base Card Style */
.shop-detail .card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 16px;
}

.shop-detail .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid #f3f4f6;
}

.shop-detail .card-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: #111827;
}

/* Detail Grid Layout */
.detail-grid {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 24px;
}

.detail-main {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.detail-sidebar {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

/* Details Grid (key-value pairs) */
.details-grid {
    display: flex;
    flex-direction: column;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid #f3f4f6;
}

.detail-row:last-child {
    border-bottom: none;
}

.detail-label {
    color: #6b7280;
    font-size: 14px;
}

.detail-value {
    color: #111827;
    font-size: 14px;
    font-weight: 500;
    text-align: right;
}

.detail-value a {
    color: #f97316;
    text-decoration: none;
}

.detail-value a:hover {
    text-decoration: underline;
}

/* Shop Detail Header */
.shop-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
}

.shop-header-left {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.shop-title-section h1 {
    font-size: 24px;
    font-weight: 700;
    margin: 0 0 6px 0;
    color: #111827;
}

.shop-subtitle {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #6b7280;
    font-size: 14px;
}

.shop-header-actions {
    display: flex;
    gap: 10px;
}

/* Quick Links Bar */
.quick-links-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 20px;
}

.quick-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    color: #374151;
    font-size: 13px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s;
}

.quick-link:hover {
    border-color: #f97316;
    color: #f97316;
    background: #fff7ed;
}

.quick-link i {
    width: 16px;
    height: 16px;
}

/* Stats Row */
.stats-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 20px;
}

.stat-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px;
    text-align: center;
}

.stat-label {
    display: block;
    font-size: 11px;
    color: #6b7280;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-value {
    display: block;
    font-size: 24px;
    font-weight: 700;
    color: #111827;
}

.stat-value small {
    font-size: 16px;
    color: #fbbf24;
}

.stat-detail {
    display: block;
    font-size: 12px;
    color: #9ca3af;
    margin-top: 2px;
}

/* Shop Tabs */
.shop-tabs {
    display: flex;
    gap: 4px;
    border-bottom: 1px solid #e5e7eb;
    margin-bottom: 20px;
}

.shop-tabs .tab-btn {
    padding: 10px 16px;
    background: none;
    border: none;
    font-size: 14px;
    font-weight: 500;
    color: #6b7280;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all 0.2s;
}

.shop-tabs .tab-btn:hover {
    color: #f97316;
}

.shop-tabs .tab-btn.active {
    color: #f97316;
    border-bottom-color: #f97316;
}

/* Tab Content */
.tab-content {
    display: block;
}

.tab-content.hidden {
    display: none;
}

/* Social Links Grid */
.social-links-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
}

.social-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 12px;
    border-radius: 8px;
    text-decoration: none;
    font-size: 12px;
    text-transform: capitalize;
    transition: all 0.2s;
}

.social-link i {
    width: 22px;
    height: 22px;
}

.social-link.active {
    background: #f0fdf4;
    color: #16a34a;
}

.social-link.active:hover {
    background: #dcfce7;
}

.social-link.inactive {
    background: #f9fafb;
    color: #9ca3af;
}

/* Products List */
.products-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.product-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 8px;
    font-size: 14px;
}

.product-item i {
    width: 18px;
    height: 18px;
}

.product-item.active {
    background: #f0fdf4;
    color: #16a34a;
}

.product-item.inactive {
    background: #f9fafb;
    color: #9ca3af;
}

/* Mini Cards for Sidebar */
.mini-deal-card,
.mini-contact-card {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s;
}

.mini-deal-card:hover,
.mini-contact-card:hover {
    border-color: #f97316;
    background: #fff7ed;
}

.mini-deal-name,
.mini-contact-name {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
    color: #111827;
}

.mini-deal-value {
    font-size: 14px;
    font-weight: 600;
    color: #16a34a;
}

.mini-contact-info {
    flex: 1;
}

.mini-contact-title {
    font-size: 12px;
    color: #6b7280;
}

.empty-mini {
    padding: 16px;
    text-align: center;
    color: #9ca3af;
    font-size: 13px;
}

/* Back Link */
.back-link {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    color: #6b7280;
    text-decoration: none;
    font-size: 14px;
    margin-bottom: 8px;
}

.back-link:hover {
    color: #f97316;
}

.back-link i {
    width: 16px;
    height: 16px;
}

/* Icon Button */
.btn-icon {
    background: none;
    border: none;
    padding: 6px;
    border-radius: 6px;
    cursor: pointer;
    color: #6b7280;
    transition: all 0.2s;
}

.btn-icon:hover {
    background: #f3f4f6;
    color: #f97316;
}

.btn-icon i {
    width: 16px;
    height: 16px;
}

/* Shops Grid */
.shops-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 16px;
}

.shop-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px;
    cursor: pointer;
    transition: all 0.2s;
}

.shop-card:hover {
    border-color: #f97316;
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.15);
}

.shop-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
}

.shop-card-header h3 {
    font-size: 15px;
    font-weight: 600;
    margin: 0;
    color: #111827;
}

.shop-card-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 8px;
}

.shop-card-meta span {
    display: flex;
    align-items: center;
    gap: 4px;
}

.shop-card-meta i {
    width: 14px;
    height: 14px;
}

/* Filter Row */
.filter-row {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}

.search-input {
    flex: 1;
    min-width: 200px;
    padding: 8px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
}

.search-input:focus {
    outline: none;
    border-color: #f97316;
}

.filter-select {
    padding: 8px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
    background: white;
    min-width: 120px;
}

.filter-select:focus {
    outline: none;
    border-color: #f97316;
}

/* Responsive */
@media (max-width: 900px) {
    .detail-grid {
        grid-template-columns: 1fr;
    }
    
    .stats-row {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .social-links-grid {
        grid-template-columns: repeat(5, 1fr);
    }
}

@media (max-width: 600px) {
    .stats-row {
        grid-template-columns: 1fr;
    }
    
    .filter-row {
        flex-direction: column;
    }
    
    .search-input {
        min-width: 100%;
    }
}/* ==========================================
   SHOPS DETAIL PAGE FIX
   ========================================== */

/* Base Card Style */
.shop-detail .card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 16px;
}

.shop-detail .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid #f3f4f6;
}

.shop-detail .card-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: #111827;
}

/* Detail Grid Layout */
.detail-grid {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 24px;
}

.detail-main {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.detail-sidebar {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

/* Details Grid (key-value pairs) */
.details-grid {
    display: flex;
    flex-direction: column;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid #f3f4f6;
}

.detail-row:last-child {
    border-bottom: none;
}

.detail-label {
    color: #6b7280;
    font-size: 14px;
}

.detail-value {
    color: #111827;
    font-size: 14px;
    font-weight: 500;
    text-align: right;
}

.detail-value a {
    color: #f97316;
    text-decoration: none;
}

.detail-value a:hover {
    text-decoration: underline;
}

/* Shop Detail Header */
.shop-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
}

.shop-header-left {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.shop-title-section h1 {
    font-size: 24px;
    font-weight: 700;
    margin: 0 0 6px 0;
    color: #111827;
}

.shop-subtitle {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #6b7280;
    font-size: 14px;
}

.shop-header-actions {
    display: flex;
    gap: 10px;
}

/* Quick Links Bar */
.quick-links-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 20px;
}

.quick-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    color: #374151;
    font-size: 13px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s;
}

.quick-link:hover {
    border-color: #f97316;
    color: #f97316;
    background: #fff7ed;
}

.quick-link i {
    width: 16px;
    height: 16px;
}

/* Stats Row */
.stats-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 20px;
}

.stat-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px;
    text-align: center;
}

.stat-label {
    display: block;
    font-size: 11px;
    color: #6b7280;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-value {
    display: block;
    font-size: 24px;
    font-weight: 700;
    color: #111827;
}

.stat-value small {
    font-size: 16px;
    color: #fbbf24;
}

.stat-detail {
    display: block;
    font-size: 12px;
    color: #9ca3af;
    margin-top: 2px;
}

/* Shop Tabs */
.shop-tabs {
    display: flex;
    gap: 4px;
    border-bottom: 1px solid #e5e7eb;
    margin-bottom: 20px;
}

.shop-tabs .tab-btn {
    padding: 10px 16px;
    background: none;
    border: none;
    font-size: 14px;
    font-weight: 500;
    color: #6b7280;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all 0.2s;
}

.shop-tabs .tab-btn:hover {
    color: #f97316;
}

.shop-tabs .tab-btn.active {
    color: #f97316;
    border-bottom-color: #f97316;
}

/* Tab Content */
.tab-content {
    display: block;
}

.tab-content.hidden {
    display: none;
}

/* Social Links Grid */
.social-links-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
}

.social-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 12px;
    border-radius: 8px;
    text-decoration: none;
    font-size: 12px;
    text-transform: capitalize;
    transition: all 0.2s;
}

.social-link i {
    width: 22px;
    height: 22px;
}

.social-link.active {
    background: #f0fdf4;
    color: #16a34a;
}

.social-link.active:hover {
    background: #dcfce7;
}

.social-link.inactive {
    background: #f9fafb;
    color: #9ca3af;
}

/* Products List */
.products-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.product-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 8px;
    font-size: 14px;
}

.product-item i {
    width: 18px;
    height: 18px;
}

.product-item.active {
    background: #f0fdf4;
    color: #16a34a;
}

.product-item.inactive {
    background: #f9fafb;
    color: #9ca3af;
}

/* Mini Cards for Sidebar */
.mini-deal-card,
.mini-contact-card {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s;
}

.mini-deal-card:hover,
.mini-contact-card:hover {
    border-color: #f97316;
    background: #fff7ed;
}

.mini-deal-name,
.mini-contact-name {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
    color: #111827;
}

.mini-deal-value {
    font-size: 14px;
    font-weight: 600;
    color: #16a34a;
}

.mini-contact-info {
    flex: 1;
}

.mini-contact-title {
    font-size: 12px;
    color: #6b7280;
}

.empty-mini {
    padding: 16px;
    text-align: center;
    color: #9ca3af;
    font-size: 13px;
}

/* Back Link */
.back-link {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    color: #6b7280;
    text-decoration: none;
    font-size: 14px;
    margin-bottom: 8px;
}

.back-link:hover {
    color: #f97316;
}

.back-link i {
    width: 16px;
    height: 16px;
}

/* Icon Button */
.btn-icon {
    background: none;
    border: none;
    padding: 6px;
    border-radius: 6px;
    cursor: pointer;
    color: #6b7280;
    transition: all 0.2s;
}

.btn-icon:hover {
    background: #f3f4f6;
    color: #f97316;
}

.btn-icon i {
    width: 16px;
    height: 16px;
}

/* Shops Grid */
.shops-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 16px;
}

.shop-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px;
    cursor: pointer;
    transition: all 0.2s;
}

.shop-card:hover {
    border-color: #f97316;
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.15);
}

.shop-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
}

.shop-card-header h3 {
    font-size: 15px;
    font-weight: 600;
    margin: 0;
    color: #111827;
}

.shop-card-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 8px;
}

.shop-card-meta span {
    display: flex;
    align-items: center;
    gap: 4px;
}

.shop-card-meta i {
    width: 14px;
    height: 14px;
}

/* Filter Row */
.filter-row {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}

.search-input {
    flex: 1;
    min-width: 200px;
    padding: 8px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
}

.search-input:focus {
    outline: none;
    border-color: #f97316;
}

.filter-select {
    padding: 8px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
    background: white;
    min-width: 120px;
}

.filter-select:focus {
    outline: none;
    border-color: #f97316;
}

/* Responsive */
@media (max-width: 900px) {
    .detail-grid {
        grid-template-columns: 1fr;
    }
    
    .stats-row {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .social-links-grid {
        grid-template-columns: repeat(5, 1fr);
    }
}

@media (max-width: 600px) {
    .stats-row {
        grid-template-columns: 1fr;
    }
    
    .filter-row {
        flex-direction: column;
    }
    
    .search-input {
        min-width: 100%;
    }
}

/* Additional Badge Styles */
.shop-card-badges {
    display: flex;
    gap: 4px;
}

.shop-card-tags {
    display: flex;
    gap: 6px;
    margin-top: 8px;
    flex-wrap: wrap;
}

.badge-outline {
    background: transparent;
    border: 1px solid #9ca3af;
    color: #6b7280;
}

.badge-blue-outline {
    background: #eff6ff;
    border: 1px solid #3b82f6;
    color: #2563eb;
}

.badge-red-outline {
    background: #fef2f2;
    border: 1px solid #fca5a5;
    color: #dc2626;
    font-size: 11px;
}

.badge-orange {
    background: #fff7ed;
    color: #ea580c;
}

/* Improved filter row */
.filter-select {
    min-width: 140px;
}

#shops-filters {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 16px;
}
/* ==========================================
   EMAIL & ACTIVITY STYLES
   ========================================== */

/* Email Composer Modal */
.email-composer-modal {
    width: 600px;
    max-width: 95vw;
}

.email-composer-modal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid #e5e7eb;
}

.email-composer-modal .modal-header h2 {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0;
    font-size: 18px;
}

.email-composer-modal .modal-header h2 i {
    width: 20px;
    height: 20px;
    color: #f97316;
}

.email-form {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.email-form .form-row {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.email-form label {
    font-size: 13px;
    font-weight: 500;
    color: #374151;
}

.email-form input,
.email-form textarea {
    padding: 10px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
    transition: border-color 0.2s;
}

.email-form input:focus,
.email-form textarea:focus {
    outline: none;
    border-color: #f97316;
}

.email-form textarea {
    resize: vertical;
    min-height: 150px;
    font-family: inherit;
    line-height: 1.5;
}

.email-templates {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.template-label {
    font-size: 12px;
    color: #6b7280;
}

.template-btn {
    padding: 4px 10px;
    background: #f3f4f6;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 12px;
    color: #374151;
    cursor: pointer;
    transition: all 0.2s;
}

.template-btn:hover {
    background: #fff7ed;
    border-color: #f97316;
    color: #f97316;
}

/* Log Activity Modal */
.log-activity-modal {
    width: 500px;
    max-width: 95vw;
}

.activity-type-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid #e5e7eb;
}

.activity-type-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s;
}

.activity-type-btn i {
    width: 16px;
    height: 16px;
}

.activity-type-btn:hover {
    background: #f3f4f6;
}

.activity-type-btn.active {
    background: #fff7ed;
    border-color: #f97316;
    color: #f97316;
}

.activity-form {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.activity-form .form-row {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.activity-form label {
    font-size: 13px;
    font-weight: 500;
    color: #374151;
}

.activity-form input,
.activity-form textarea,
.activity-form select {
    padding: 10px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
    transition: border-color 0.2s;
}

.activity-form input:focus,
.activity-form textarea:focus,
.activity-form select:focus {
    outline: none;
    border-color: #f97316;
}

/* Quick Actions Bar */
.quick-actions-bar {
    display: flex;
    gap: 8px;
    padding: 12px 0;
    margin-bottom: 16px;
    border-bottom: 1px solid #e5e7eb;
}

.quick-action-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    color: #374151;
    cursor: pointer;
    transition: all 0.2s;
}

.quick-action-btn i {
    width: 16px;
    height: 16px;
}

.quick-action-btn:hover {
    border-color: #f97316;
    color: #f97316;
    background: #fff7ed;
}

/* Activity Timeline */
.activity-timeline {
    display: flex;
    flex-direction: column;
}

.activity-item {
    display: flex;
    gap: 12px;
    padding: 16px 0;
    border-bottom: 1px solid #f3f4f6;
}

.activity-item:last-child {
    border-bottom: none;
}

.activity-icon {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.activity-icon i {
    width: 18px;
    height: 18px;
}

.activity-content {
    flex: 1;
    min-width: 0;
}

.activity-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 4px;
    flex-wrap: wrap;
}

.activity-type {
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    color: #6b7280;
}

.activity-subject {
    font-size: 14px;
    font-weight: 500;
    color: #111827;
}

.activity-time {
    font-size: 12px;
    color: #9ca3af;
    margin-left: auto;
}

.activity-body {
    font-size: 14px;
    color: #4b5563;
    line-height: 1.5;
    margin: 8px 0;
}

.activity-outcome {
    display: inline-block;
    padding: 2px 8px;
    background: #f3f4f6;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
    color: #6b7280;
    text-transform: capitalize;
    margin-top: 6px;
}

.activity-meta {
    display: flex;
    gap: 12px;
    font-size: 12px;
    color: #9ca3af;
    margin-top: 8px;
}

.empty-timeline {
    text-align: center;
    padding: 40px 20px;
    color: #9ca3af;
}

.empty-timeline i {
    width: 40px;
    height: 40px;
    margin-bottom: 12px;
    opacity: 0.5;
}

.empty-timeline p {
    margin: 0;
    font-size: 14px;
}

/* Activity Tab Content */
.activity-tab-content {
    display: flex;
    flex-direction: column;
}

.activity-filters {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
}

.activity-filter-btn {
    padding: 6px 12px;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 12px;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s;
}

.activity-filter-btn:hover {
    background: #f3f4f6;
}

.activity-filter-btn.active {
    background: #111827;
    border-color: #111827;
    color: white;
}

/* Modal Overlay */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal {
    background: white;
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: slideUp 0.2s ease;
    max-height: 90vh;
    overflow-y: auto;
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.modal-header {
    padding: 16px 20px;
    border-bottom: 1px solid #e5e7eb;
}

.modal-body {
    padding: 20px;
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    padding: 16px 20px;
    border-top: 1px solid #e5e7eb;
}
// ============================================
// COMPANIES MODULE - Customer Lifecycle Management
// ============================================

const Companies = {
    currentCompany: null,
    
    async render(params = {}) {
        if (params.id) {
            await this.showCompanyDetail(params.id);
            return;
        }
        await this.loadData();
        this.renderList();
    },
    
    async loadData() {
        const { data } = await db
            .from('companies')
            .select('*, deals(id, name, value, stage_id, pipeline_stages(name, color))')
            .order('name')
            .limit(200);
        
        if (data) Store.data.companies = data;
    },
    
    renderList() {
        const container = document.getElementById('page-companies');
        if (!container) return;
        
        const companies = Store.data.companies || [];
        
        container.innerHTML = `
            <div class="page-header">
                <h1>Companies</h1>
                <div class="header-actions">
                    <input type="text" class="search-input" id="company-search" placeholder="Search companies..." oninput="Companies.filterList()">
                    <select class="form-select" id="lifecycle-filter" onchange="Companies.filterList()">
                        <option value="">All Lifecycle</option>
                        <option value="lead">Lead</option>
                        <option value="prospect">Prospect</option>
                        <option value="customer">Customer</option>
                        <option value="partner">Partner</option>
                        <option value="churned">Churned</option>
                    </select>
                    <button class="btn btn-primary" onclick="Companies.showNewModal()">
                        <i data-lucide="plus"></i> New Company
                    </button>
                </div>
            </div>
            
            <div id="companies-list">
                ${this.renderTable(companies)}
            </div>
        `;
        
        if (window.lucide) lucide.createIcons();
    },
    
    renderTable(companies) {
        if (!companies.length) {
            return `<div class="empty-state">
                <div class="empty-icon"></div>
                <h3>No companies found</h3>
                <p>Add your first company to get started</p>
            </div>`;
        }
        
        return `<table class="data-table">
            <thead>
                <tr>
                    <th>Company</th>
                    <th>Location</th>
                    <th>Lifecycle</th>
                    <th>Active Deals</th>
                    <th>Total Value</th>
                    <th>Health</th>
                </tr>
            </thead>
            <tbody>
                ${companies.map(c => {
                    const deals = c.deals || [];
                    const totalValue = deals.reduce((sum, d) => sum + (d.value || 0), 0);
                    const lifecycleColors = {
                        lead: '#6B7280',
                        prospect: '#3B82F6',
                        customer: '#10B981',
                        partner: '#F59E0B',
                        churned: '#EF4444'
                    };
                    return `<tr onclick="Companies.showCompanyDetail('${c.id}')" class="clickable-row">
                        <td>
                            <div class="company-cell">
                                <strong>${UI.escapeHtml(c.name || 'Unnamed')}</strong>
                                ${c.website ? `<a href="${c.website}" target="_blank" class="text-muted text-sm" onclick="event.stopPropagation()"><i data-lucide="external-link" style="width:12px;height:12px"></i></a>` : ''}
                            </div>
                        </td>
                        <td>${c.city || ''}, ${c.state || ''}</td>
                        <td>
                            <span class="badge" style="background:${lifecycleColors[c.lifecycle_stage] || '#6B7280'}">
                                ${c.lifecycle_stage || 'Unknown'}
                            </span>
                        </td>
                        <td>${deals.length}</td>
                        <td>$${totalValue.toLocaleString()}</td>
                        <td>
                            <div class="health-indicator ${this.getHealthClass(c.health_score)}">
                                ${c.health_score || '-'}
                            </div>
                        </td>
                    </tr>`;
                }).join('')}
            </tbody>
        </table>`;
    },
    
    getHealthClass(score) {
        if (!score) return '';
        if (score >= 80) return 'health-good';
        if (score >= 50) return 'health-warning';
        return 'health-danger';
    },
    
    filterList() {
        const search = document.getElementById('company-search')?.value?.toLowerCase() || '';
        const lifecycle = document.getElementById('lifecycle-filter')?.value || '';
        
        let filtered = Store.data.companies || [];
        
        if (search) {
            filtered = filtered.filter(c => 
                c.name?.toLowerCase().includes(search) ||
                c.city?.toLowerCase().includes(search)
            );
        }
        
        if (lifecycle) {
            filtered = filtered.filter(c => c.lifecycle_stage === lifecycle);
        }
        
        document.getElementById('companies-list').innerHTML = this.renderTable(filtered);
        if (window.lucide) lucide.createIcons();
    },
    
    // ==========================================
    // COMPANY DETAIL PAGE
    // ==========================================
    
    async showCompanyDetail(companyId) {
        const { data: company } = await db.from('companies')
            .select('*')
            .eq('id', companyId)
            .single();
        
        if (!company) {
            UI.toast('Company not found', 'error');
            Router.navigate('companies');
            return;
        }
        
        this.currentCompany = company;
        
        // Load all related data in parallel
        const [dealsRes, contactsRes, activitiesRes, tasksRes, ticketsRes] = await Promise.all([
            db.from('deals')
                .select('*, pipeline_stages(id,name,color), pipelines(id,name)')
                .eq('company_id', companyId)
                .order('created_at', { ascending: false }),
            db.from('company_contacts')
                .select('*, contacts(*)')
                .eq('company_id', companyId),
            db.from('activities')
                .select('*')
                .eq('company_id', companyId)
                .order('created_at', { ascending: false })
                .limit(50),
            db.from('tasks')
                .select('*')
                .eq('company_id', companyId)
                .order('due_date'),
            // Support tickets - future Zendesk integration
            db.from('support_tickets')
                .select('*')
                .eq('company_id', companyId)
                .order('created_at', { ascending: false })
                .limit(20)
        ]);
        
        const deals = dealsRes.data || [];
        const contacts = contactsRes.data || [];
        const activities = activitiesRes.data || [];
        const tasks = tasksRes.data || [];
        const tickets = ticketsRes.data || [];
        
        const page = document.getElementById('page-companies');
        page.innerHTML = this.buildDetailHTML(company, deals, contacts, activities, tasks, tickets);
        
        this.initTabs();
        if (window.lucide) lucide.createIcons();
    },
    
    buildDetailHTML(company, deals, contacts, activities, tasks, tickets) {
        const primaryContact = contacts.find(c => c.is_primary)?.contacts || contacts[0]?.contacts;
        const isCustomer = ['customer', 'partner'].includes(company.lifecycle_stage);
        const openTickets = tickets.filter(t => t.status !== 'closed');
        
        // Calculate metrics
        const salesDeals = deals.filter(d => d.pipelines?.name === 'Sales');
        const customerDeals = deals.filter(d => d.pipelines?.name === 'Customer Success');
        const totalValue = deals.reduce((sum, d) => sum + (d.value || 0), 0);
        const wonDeals = deals.filter(d => d.pipeline_stages?.name === 'Won');
        
        return `<div class="company-detail">
            <div class="company-header">
                <div class="company-header-left">
                    <button class="btn btn-ghost" onclick="Router.navigate('companies')">
                        <i data-lucide="arrow-left"></i> Back
                    </button>
                    <div class="company-title-section">
                        <h1>${UI.escapeHtml(company.name)}</h1>
                        <div class="company-subtitle">
                            ${company.city || ''}, ${company.state || ''}
                            <span class="lifecycle-badge lifecycle-${company.lifecycle_stage || 'unknown'}">
                                ${company.lifecycle_stage || 'Unknown'}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="company-header-right">
                    <select class="lifecycle-select" onchange="Companies.updateLifecycle(this.value)">
                        <option value="lead" ${company.lifecycle_stage === 'lead' ? 'selected' : ''}>Lead</option>
                        <option value="prospect" ${company.lifecycle_stage === 'prospect' ? 'selected' : ''}>Prospect</option>
                        <option value="customer" ${company.lifecycle_stage === 'customer' ? 'selected' : ''}>Customer</option>
                        <option value="partner" ${company.lifecycle_stage === 'partner' ? 'selected' : ''}>Partner</option>
                        <option value="churned" ${company.lifecycle_stage === 'churned' ? 'selected' : ''}>Churned</option>
                    </select>
                    <button class="btn btn-secondary" onclick="Companies.editCompany()">
                        <i data-lucide="edit-2"></i> Edit
                    </button>
                </div>
            </div>
            
            <!-- Stats Row -->
            <div class="stats-row">
                <div class="stat-card">
                    <span class="stat-label">Total Value</span>
                    <span class="stat-value">$${totalValue.toLocaleString()}</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Deals</span>
                    <span class="stat-value">${deals.length}</span>
                    <span class="stat-detail">${wonDeals.length} won</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Health Score</span>
                    <span class="stat-value health-${this.getHealthClass(company.health_score)}">${company.health_score || '-'}</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Open Tickets</span>
                    <span class="stat-value ${openTickets.length > 0 ? 'text-warning' : ''}">${openTickets.length}</span>
                </div>
            </div>
            
            <!-- Lifecycle Tabs -->
            <div class="lifecycle-tabs">
                <button class="lifecycle-tab active" data-tab="overview">
                    <i data-lucide="layout-dashboard"></i> Overview
                </button>
                <button class="lifecycle-tab" data-tab="sales">
                    <i data-lucide="trending-up"></i> Sales
                </button>
                <button class="lifecycle-tab" data-tab="onboarding">
                    <i data-lucide="rocket"></i> Onboarding
                </button>
                <button class="lifecycle-tab" data-tab="support">
                    <i data-lucide="headphones"></i> Support
                </button>
                <button class="lifecycle-tab" data-tab="success">
                    <i data-lucide="trophy"></i> Success
                </button>
            </div>
            
            <div class="company-content">
                <div class="lifecycle-tab-content active" id="tab-overview">
                    ${this.renderOverview(company, primaryContact, deals, activities.slice(0,5), tasks.slice(0,3))}
                </div>
                <div class="lifecycle-tab-content" id="tab-sales">
                    ${this.renderSalesTab(company, salesDeals, contacts, activities)}
                </div>
                <div class="lifecycle-tab-content" id="tab-onboarding">
                    ${this.renderOnboardingTab(company, customerDeals)}
                </div>
                <div class="lifecycle-tab-content" id="tab-support">
                    ${this.renderSupportTab(company, tickets)}
                </div>
                <div class="lifecycle-tab-content" id="tab-success">
                    ${this.renderSuccessTab(company, customerDeals)}
                </div>
            </div>
        </div>`;
    },
    
    initTabs() {
        document.querySelectorAll('.lifecycle-tab').forEach(tab => {
            tab.onclick = () => {
                document.querySelectorAll('.lifecycle-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.lifecycle-tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(`tab-${tab.dataset.tab}`)?.classList.add('active');
                if (window.lucide) lucide.createIcons();
            };
        });
    },
    
    // ==========================================
    // TAB RENDERERS
    // ==========================================
    
    renderOverview(company, contact, deals, activities, tasks) {
        const contactEmail = contact?.email || company.email || '';
        
        return `<div class="overview-grid">
            <div class="overview-main">
                <div class="card">
                    <div class="card-header"><h3>Quick Actions</h3></div>
                    <div class="card-body">
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="EmailActivity.showEmailComposer({companyId:'${company.id}',toEmail:'${contactEmail}'})">
                                <i data-lucide="mail"></i> Send Email
                            </button>
                            <button class="btn btn-secondary" onclick="EmailActivity.showLogActivityModal({companyId:'${company.id}',type:'call'})">
                                <i data-lucide="phone"></i> Log Call
                            </button>
                            <button class="btn btn-secondary" onclick="Deals.showNewDealModal('${company.id}','${UI.escapeHtml(company.name)}')">
                                <i data-lucide="plus-circle"></i> New Deal
                            </button>
                            <button class="btn btn-secondary" onclick="Companies.createTask()">
                                <i data-lucide="check-square"></i> Create Task
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header"><h3>Recent Activity</h3></div>
                    <div class="card-body">
                        ${activities.length ? `<div class="activity-list">${activities.map(a => this.activityItem(a)).join('')}</div>` : '<p class="text-muted">No activity yet</p>'}
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header"><h3>Pending Tasks</h3></div>
                    <div class="card-body">
                        ${tasks.filter(t => t.status !== 'completed').length ? 
                            `<div class="task-list">${tasks.filter(t => t.status !== 'completed').map(t => this.taskItem(t)).join('')}</div>` : 
                            '<p class="text-muted">No pending tasks</p>'}
                    </div>
                </div>
            </div>
            
            <div class="overview-sidebar">
                <div class="card">
                    <div class="card-header">
                        <h3>Company Details</h3>
                        <button class="btn btn-ghost btn-sm" onclick="Companies.editCompany()"><i data-lucide="edit-2"></i></button>
                    </div>
                    <div class="card-body">
                        <div class="detail-row"><label>Phone</label><span>${company.phone || '-'}</span></div>
                        <div class="detail-row"><label>Email</label><span>${company.email || '-'}</span></div>
                        <div class="detail-row"><label>Website</label><span>${company.website ? `<a href="${company.website}" target="_blank">${company.website}</a>` : '-'}</span></div>
                        <div class="detail-row"><label>Industry</label><span>${company.industry || '-'}</span></div>
                        <div class="detail-row"><label>Size</label><span>${company.company_size || '-'}</span></div>
                        <div class="detail-row"><label>Lead Source</label><span>${company.lead_source || '-'}</span></div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Primary Contact</h3>
                        <button class="btn btn-ghost btn-sm" onclick="Companies.addContact()"><i data-lucide="plus"></i></button>
                    </div>
                    <div class="card-body">
                        ${contact ? `<div class="contact-card">
                            <div class="contact-avatar">${UI.getInitials(contact.first_name, contact.last_name)}</div>
                            <div class="contact-info">
                                <div class="contact-name">${contact.first_name} ${contact.last_name || ''}</div>
                                <div class="contact-title">${contact.job_title || ''}</div>
                                ${contact.email ? `<a href="mailto:${contact.email}">${contact.email}</a>` : ''}
                            </div>
                        </div>` : '<p class="text-muted">No contacts linked</p>'}
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header"><h3>Active Deals</h3></div>
                    <div class="card-body">
                        ${deals.slice(0,3).length ? deals.slice(0,3).map(d => `
                            <div class="mini-deal-card" onclick="Router.navigate('deals/${d.id}')">
                                <div class="mini-deal-name">${UI.escapeHtml(d.name)}</div>
                                <span class="badge" style="background:${d.pipeline_stages?.color || '#6B7280'}">${d.pipeline_stages?.name || '-'}</span>
                                <span class="mini-deal-value">$${(d.value || 0).toLocaleString()}</span>
                            </div>
                        `).join('') : '<p class="text-muted">No active deals</p>'}
                    </div>
                </div>
            </div>
        </div>`;
    },
    
    renderSalesTab(company, deals, contacts, activities) {
        const salesActivities = activities.filter(a => ['call', 'email', 'meeting', 'demo'].includes(a.activity_type));
        
        return `<div class="sales-tab-content">
            <div class="sales-grid">
                <div class="sales-main">
                    <div class="card">
                        <div class="card-header">
                            <h3>Sales Deals</h3>
                            <button class="btn btn-primary btn-sm" onclick="Deals.showNewDealModal('${company.id}','${UI.escapeHtml(company.name)}')">
                                <i data-lucide="plus"></i> New Deal
                            </button>
                        </div>
                        <div class="card-body">
                            ${deals.length ? `<table class="data-table">
                                <thead><tr><th>Deal</th><th>Stage</th><th>Value</th><th>Expected Close</th></tr></thead>
                                <tbody>
                                    ${deals.map(d => `<tr onclick="Router.navigate('deals/${d.id}')" class="clickable-row">
                                        <td><strong>${UI.escapeHtml(d.name)}</strong></td>
                                        <td><span class="badge" style="background:${d.pipeline_stages?.color || '#6B7280'}">${d.pipeline_stages?.name || '-'}</span></td>
                                        <td>$${(d.value || 0).toLocaleString()}</td>
                                        <td>${d.expected_close_date ? new Date(d.expected_close_date).toLocaleDateString() : '-'}</td>
                                    </tr>`).join('')}
                                </tbody>
                            </table>` : '<div class="empty-state"><p>No sales deals yet</p></div>'}
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header"><h3>Sales Activity</h3></div>
                        <div class="card-body">
                            ${salesActivities.length ? `<div class="activity-timeline">${salesActivities.slice(0,10).map(a => this.activityItem(a, true)).join('')}</div>` : '<p class="text-muted">No sales activity logged</p>'}
                        </div>
                    </div>
                </div>
                
                <div class="sales-sidebar">
                    <div class="card">
                        <div class="card-header"><h3>Sales Notes</h3></div>
                        <div class="card-body">
                            <textarea class="form-textarea" rows="6" placeholder="Add sales notes..." 
                                onchange="Companies.updateField('sales_notes', this.value)">${company.sales_notes || ''}</textarea>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header"><h3>Competitor Info</h3></div>
                        <div class="card-body">
                            <textarea class="form-textarea" rows="4" placeholder="Current POS, ordering platform, etc." 
                                onchange="Companies.updateField('competitor_info', this.value)">${company.competitor_info || ''}</textarea>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header"><h3>Decision Makers</h3></div>
                        <div class="card-body">
                            ${contacts.map(dc => dc.contacts).filter(Boolean).map(c => `
                                <div class="mini-contact">
                                    <div class="avatar-sm">${UI.getInitials(c.first_name, c.last_name)}</div>
                                    <div>
                                        <div class="text-sm font-medium">${c.first_name} ${c.last_name || ''}</div>
                                        <div class="text-xs text-muted">${c.job_title || ''}</div>
                                    </div>
                                </div>
                            `).join('') || '<p class="text-muted">No contacts added</p>'}
                        </div>
                    </div>
                </div>
            </div>
        </div>`;
    },
    
    renderOnboardingTab(company, customerDeals) {
        const onboardingChecks = [
            ['kickoff_completed', 'Kickoff call completed', 'calendar'],
            ['menu_setup_completed', 'Menu setup completed', 'list'],
            ['hardware_ordered', 'Hardware ordered', 'package'],
            ['hardware_shipped', 'Hardware shipped', 'truck'],
            ['hardware_installed', 'Hardware installed', 'monitor'],
            ['training_scheduled', 'Training scheduled', 'calendar'],
            ['training_completed', 'Training completed', 'check-circle'],
            ['go_live_completed', 'Go-live completed', 'rocket']
        ];
        
        const completedCount = onboardingChecks.filter(([field]) => company[field]).length;
        const progress = Math.round((completedCount / onboardingChecks.length) * 100);
        
        return `<div class="onboarding-tab-content">
            <div class="onboarding-header">
                <div class="onboarding-progress-card">
                    <div class="progress-circle" style="--progress: ${progress}">
                        <span class="progress-value">${progress}%</span>
                    </div>
                    <div class="progress-info">
                        <h3>Onboarding Progress</h3>
                        <p>${completedCount} of ${onboardingChecks.length} steps completed</p>
                    </div>
                </div>
                
                <div class="onboarding-dates">
                    <div class="date-field">
                        <label>Expected Launch</label>
                        <input type="date" class="form-input" value="${company.expected_launch_date?.split('T')[0] || ''}"
                            onchange="Companies.updateField('expected_launch_date', this.value)">
                    </div>
                    <div class="date-field">
                        <label>Actual Launch</label>
                        <input type="date" class="form-input" value="${company.launched_at?.split('T')[0] || ''}"
                            onchange="Companies.updateField('launched_at', this.value)">
                    </div>
                </div>
            </div>
            
            <div class="onboarding-grid">
                <div class="card">
                    <div class="card-header"><h3>Launch Checklist</h3></div>
                    <div class="card-body">
                        <div class="checklist">
                            ${onboardingChecks.map(([field, label, icon]) => `
                                <label class="checklist-item ${company[field] ? 'completed' : ''}">
                                    <input type="checkbox" ${company[field] ? 'checked' : ''} 
                                        onchange="Companies.updateField('${field}', this.checked)">
                                    <i data-lucide="${icon}"></i>
                                    <span>${label}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header"><h3>Onboarding Notes</h3></div>
                    <div class="card-body">
                        <textarea class="form-textarea" rows="6" placeholder="Add onboarding notes, special requirements, etc."
                            onchange="Companies.updateField('onboarding_notes', this.value)">${company.onboarding_notes || ''}</textarea>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header"><h3>Hardware & Setup</h3></div>
                    <div class="card-body">
                        <div class="detail-row">
                            <label>Hardware Type</label>
                            <select class="form-select" onchange="Companies.updateField('hardware_type', this.value)">
                                <option value="">Select...</option>
                                <option value="tablet" ${company.hardware_type === 'tablet' ? 'selected' : ''}>Tablet</option>
                                <option value="kiosk" ${company.hardware_type === 'kiosk' ? 'selected' : ''}>Kiosk</option>
                                <option value="terminal" ${company.hardware_type === 'terminal' ? 'selected' : ''}>Terminal</option>
                                <option value="byod" ${company.hardware_type === 'byod' ? 'selected' : ''}>BYOD</option>
                            </select>
                        </div>
                        <div class="detail-row">
                            <label>Tracking #</label>
                            <input type="text" class="form-input" value="${company.hardware_tracking || ''}" 
                                placeholder="Shipping tracking number"
                                onchange="Companies.updateField('hardware_tracking', this.value)">
                        </div>
                        <div class="detail-row">
                            <label>Menu Items</label>
                            <span>${company.menu_item_count || '-'}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>`;
    },
    
    renderSupportTab(company, tickets) {
        const openTickets = tickets.filter(t => t.status !== 'closed');
        const closedTickets = tickets.filter(t => t.status === 'closed');
        
        return `<div class="support-tab-content">
            <div class="support-header">
                <div class="support-stats">
                    <div class="stat-mini">
                        <span class="stat-mini-value">${openTickets.length}</span>
                        <span class="stat-mini-label">Open Tickets</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-mini-value">${closedTickets.length}</span>
                        <span class="stat-mini-label">Resolved</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-mini-value">${company.avg_response_time || '-'}</span>
                        <span class="stat-mini-label">Avg Response</span>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="Companies.createTicket()">
                    <i data-lucide="plus"></i> New Ticket
                </button>
            </div>
            
            <div class="support-grid">
                <div class="card">
                    <div class="card-header"><h3>Open Tickets</h3></div>
                    <div class="card-body">
                        ${openTickets.length ? `<div class="tickets-list">
                            ${openTickets.map(t => this.ticketItem(t)).join('')}
                        </div>` : `<div class="empty-state">
                            <i data-lucide="check-circle" style="width:48px;height:48px;color:#10B981"></i>
                            <p>No open tickets!</p>
                        </div>`}
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header"><h3>Support Notes</h3></div>
                    <div class="card-body">
                        <textarea class="form-textarea" rows="4" placeholder="Known issues, special handling instructions..."
                            onchange="Companies.updateField('support_notes', this.value)">${company.support_notes || ''}</textarea>
                    </div>
                </div>
                
                <div class="card zendesk-placeholder">
                    <div class="card-header">
                        <h3>Zendesk Integration</h3>
                        <span class="badge badge-gray">Coming Soon</span>
                    </div>
                    <div class="card-body">
                        <div class="integration-placeholder">
                            <i data-lucide="headphones"></i>
                            <p>Zendesk tickets will sync here automatically</p>
                            <button class="btn btn-secondary btn-sm" disabled>Connect Zendesk</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>`;
    },
    
    renderSuccessTab(company, customerDeals) {
        const healthScore = company.health_score || 0;
        const healthClass = healthScore >= 80 ? 'good' : healthScore >= 50 ? 'warning' : 'danger';
        
        return `<div class="success-tab-content">
            <div class="success-header">
                <div class="health-score-card">
                    <div class="health-score-circle health-${healthClass}">
                        <span class="health-value">${healthScore}</span>
                    </div>
                    <div class="health-info">
                        <h3>Health Score</h3>
                        <p class="health-status health-${healthClass}">
                            ${healthScore >= 80 ? 'Healthy' : healthScore >= 50 ? 'Needs Attention' : 'At Risk'}
                        </p>
                    </div>
                </div>
                
                <div class="success-actions">
                    <button class="btn btn-secondary" onclick="Companies.calculateHealth()">
                        <i data-lucide="refresh-cw"></i> Recalculate
                    </button>
                    <button class="btn btn-secondary" onclick="EmailActivity.showLogActivityModal({companyId:'${company.id}',type:'meeting'})">
                        <i data-lucide="calendar"></i> Schedule Check-in
                    </button>
                </div>
            </div>
            
            <div class="success-grid">
                <div class="card">
                    <div class="card-header"><h3>Key Dates</h3></div>
                    <div class="card-body">
                        <div class="detail-row">
                            <label>Launched</label>
                            <span>${company.launched_at ? new Date(company.launched_at).toLocaleDateString() : '-'}</span>
                        </div>
                        <div class="detail-row">
                            <label>30-Day Check-in</label>
                            <input type="date" class="form-input" value="${company.thirty_day_at?.split('T')[0] || ''}"
                                onchange="Companies.updateField('thirty_day_at', this.value)">
                        </div>
                        <div class="detail-row">
                            <label>90-Day Check-in</label>
                            <input type="date" class="form-input" value="${company.ninety_day_at?.split('T')[0] || ''}"
                                onchange="Companies.updateField('ninety_day_at', this.value)">
                        </div>
                        <div class="detail-row">
                            <label>Annual Review</label>
                            <input type="date" class="form-input" value="${company.annual_review_at?.split('T')[0] || ''}"
                                onchange="Companies.updateField('annual_review_at', this.value)">
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header"><h3>Success Notes</h3></div>
                    <div class="card-body">
                        <textarea class="form-textarea" rows="6" placeholder="Customer feedback, wins, concerns..."
                            onchange="Companies.updateField('success_notes', this.value)">${company.success_notes || ''}</textarea>
                    </div>
                </div>
                
                <div class="card stripe-placeholder">
                    <div class="card-header">
                        <h3>Revenue Metrics</h3>
                        <span class="badge badge-gray">Stripe Integration Coming</span>
                    </div>
                    <div class="card-body">
                        <div class="integration-placeholder">
                            <i data-lucide="credit-card"></i>
                            <p>MRR, transaction volume, and payment metrics will sync from Stripe</p>
                            <button class="btn btn-secondary btn-sm" disabled>Connect Stripe</button>
                        </div>
                    </div>
                </div>
                
                <div class="card looker-placeholder">
                    <div class="card-header">
                        <h3>Analytics Dashboard</h3>
                        <span class="badge badge-gray">Looker Integration Coming</span>
                    </div>
                    <div class="card-body">
                        <div class="integration-placeholder">
                            <i data-lucide="bar-chart-2"></i>
                            <p>Order volume, customer engagement, and usage metrics from Looker</p>
                            <button class="btn btn-secondary btn-sm" disabled>Connect Looker</button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header"><h3>Expansion Opportunities</h3></div>
                    <div class="card-body">
                        <div class="expansion-checklist">
                            <label class="checklist-item">
                                <input type="checkbox" ${company.upsell_loyalty ? 'checked' : ''} 
                                    onchange="Companies.updateField('upsell_loyalty', this.checked)">
                                <span>Loyalty Program</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" ${company.upsell_kiosk ? 'checked' : ''} 
                                    onchange="Companies.updateField('upsell_kiosk', this.checked)">
                                <span>Self-Service Kiosk</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" ${company.upsell_catering ? 'checked' : ''} 
                                    onchange="Companies.updateField('upsell_catering', this.checked)">
                                <span>Catering Module</span>
                            </label>
                            <label class="checklist-item">
                                <input type="checkbox" ${company.upsell_additional_locations ? 'checked' : ''} 
                                    onchange="Companies.updateField('upsell_additional_locations', this.checked)">
                                <span>Additional Locations</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>`;
    },
    
    // ==========================================
    // HELPER RENDERERS
    // ==========================================
    
    activityItem(a, detailed = false) {
        const icons = { call: 'phone', email: 'mail', meeting: 'calendar', note: 'file-text', task: 'check-square', demo: 'monitor' };
        const colors = { call: '#10b981', email: '#3b82f6', meeting: '#8b5cf6', note: '#6b7280', task: '#f59e0b', demo: '#ec4899' };
        const icon = icons[a.activity_type] || 'activity';
        const color = colors[a.activity_type] || '#6b7280';
        
        return `<div class="activity-item">
            <div class="activity-icon" style="background:${color}20;color:${color}"><i data-lucide="${icon}"></i></div>
            <div class="activity-content">
                <div class="activity-header-text">
                    <span class="activity-type">${a.activity_type?.replace(/_/g,' ')}</span>
                    ${a.subject ? `<span class="activity-subject">${UI.escapeHtml(a.subject)}</span>` : ''}
                    <span class="activity-time">${UI.formatRelativeTime(a.created_at)}</span>
                </div>
                ${detailed && a.body ? `<div class="activity-body">${UI.escapeHtml(a.body).substring(0, 200)}...</div>` : ''}
            </div>
        </div>`;
    },
    
    taskItem(t) {
        const isOverdue = t.due_date && new Date(t.due_date) < new Date() && t.status !== 'completed';
        return `<div class="task-item ${isOverdue ? 'overdue' : ''} ${t.status === 'completed' ? 'completed' : ''}">
            <input type="checkbox" ${t.status === 'completed' ? 'checked' : ''} onchange="Companies.toggleTask('${t.id}', this.checked)">
            <div class="task-info">
                <div class="task-title">${UI.escapeHtml(t.title)}</div>
                <div class="task-meta">${t.due_date ? `Due ${new Date(t.due_date).toLocaleDateString()}` : 'No due date'}</div>
            </div>
        </div>`;
    },
    
    ticketItem(t) {
        const priorityColors = { urgent: '#EF4444', high: '#F59E0B', normal: '#3B82F6', low: '#6B7280' };
        return `<div class="ticket-item">
            <div class="ticket-priority" style="background:${priorityColors[t.priority] || '#6B7280'}"></div>
            <div class="ticket-content">
                <div class="ticket-subject">${UI.escapeHtml(t.subject)}</div>
                <div class="ticket-meta">
                    <span class="badge badge-sm">${t.status}</span>
                    <span>${UI.formatRelativeTime(t.created_at)}</span>
                </div>
            </div>
        </div>`;
    },
    
    // ==========================================
    // ACTIONS
    // ==========================================
    
    async updateField(field, value) {
        if (!this.currentCompany) return;
        const { error } = await db.from('companies').update({ [field]: value }).eq('id', this.currentCompany.id);
        if (!error) {
            this.currentCompany[field] = value;
            UI.toast('Saved');
        } else {
            UI.toast('Error saving', 'error');
        }
    },
    
    async updateLifecycle(stage) {
        if (!this.currentCompany) return;
        await this.updateField('lifecycle_stage', stage);
        // Refresh to update UI
        this.showCompanyDetail(this.currentCompany.id);
    },
    
    async toggleTask(taskId, completed) {
        await db.from('tasks').update({
            status: completed ? 'completed' : 'pending',
            completed_at: completed ? new Date().toISOString() : null
        }).eq('id', taskId);
        UI.toast(completed ? 'Task completed' : 'Task reopened');
    },
    
    createTask() {
        UI.modal({
            title: 'Create Task',
            content: `<form id="task-form">
                <div class="form-group">
                    <label class="form-label">Title *</label>
                    <input type="text" class="form-input" name="title" required placeholder="Task title...">
                </div>
                <div class="form-group">
                    <label class="form-label">Due Date</label>
                    <input type="date" class="form-input" name="due_date">
                </div>
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <select class="form-select" name="priority">
                        <option value="normal">Normal</option>
                        <option value="high">High</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>
            </form>`,
            onConfirm: async () => {
                const d = Object.fromEntries(new FormData(document.getElementById('task-form')));
                if (!d.title) { UI.toast('Title required', 'error'); return; }
                await db.from('tasks').insert({
                    company_id: this.currentCompany.id,
                    ...d,
                    status: 'pending'
                });
                UI.toast('Task created');
                UI.closeModal();
                this.showCompanyDetail(this.currentCompany.id);
            }
        });
    },
    
    createTicket() {
        UI.modal({
            title: 'Create Support Ticket',
            content: `<form id="ticket-form">
                <div class="form-group">
                    <label class="form-label">Subject *</label>
                    <input type="text" class="form-input" name="subject" required placeholder="Brief description...">
                </div>
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <select class="form-select" name="priority">
                        <option value="normal">Normal</option>
                        <option value="high">High</option>
                        <option value="urgent">Urgent</option>
                        <option value="low">Low</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" name="description" rows="4" placeholder="Full details..."></textarea>
                </div>
            </form>`,
            onConfirm: async () => {
                const d = Object.fromEntries(new FormData(document.getElementById('ticket-form')));
                if (!d.subject) { UI.toast('Subject required', 'error'); return; }
                await db.from('support_tickets').insert({
                    company_id: this.currentCompany.id,
                    ...d,
                    status: 'open'
                });
                UI.toast('Ticket created');
                UI.closeModal();
                this.showCompanyDetail(this.currentCompany.id);
            }
        });
    },
    
    calculateHealth() {
        UI.toast('Health score calculation coming soon - will factor in activity, tickets, revenue');
    },
    
    showNewModal() {
        UI.modal({
            title: 'New Company',
            size: 'lg',
            content: `<form id="new-company-form">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Company Name *</label>
                        <input type="text" class="form-input" name="name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Lifecycle Stage</label>
                        <select class="form-select" name="lifecycle_stage">
                            <option value="lead">Lead</option>
                            <option value="prospect">Prospect</option>
                            <option value="customer">Customer</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">City</label>
                        <input type="text" class="form-input" name="city">
                    </div>
                    <div class="form-group">
                        <label class="form-label">State</label>
                        <input type="text" class="form-input" name="state">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-input" name="phone">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" name="email">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Website</label>
                    <input type="url" class="form-input" name="website" placeholder="https://...">
                </div>
            </form>`,
            onConfirm: async () => {
                const d = Object.fromEntries(new FormData(document.getElementById('new-company-form')));
                if (!d.name) { UI.toast('Name required', 'error'); return; }
                const { data, error } = await db.from('companies').insert(d).select().single();
                if (error) { UI.toast('Error: ' + error.message, 'error'); return; }
                UI.toast('Company created');
                UI.closeModal();
                Router.navigate(`companies/${data.id}`);
            }
        });
    },
    
    editCompany() {
        if (!this.currentCompany) return;
        const c = this.currentCompany;
        
        UI.modal({
            title: 'Edit Company',
            size: 'lg',
            content: `<form id="edit-company-form">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Company Name *</label>
                        <input type="text" class="form-input" name="name" value="${UI.escapeHtml(c.name || '')}" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Industry</label>
                        <input type="text" class="form-input" name="industry" value="${c.industry || ''}">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">City</label>
                        <input type="text" class="form-input" name="city" value="${c.city || ''}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">State</label>
                        <input type="text" class="form-input" name="state" value="${c.state || ''}">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-input" name="phone" value="${c.phone || ''}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" name="email" value="${c.email || ''}">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Website</label>
                    <input type="url" class="form-input" name="website" value="${c.website || ''}">
                </div>
                <div class="form-group">
                    <label class="form-label">Lead Source</label>
                    <select class="form-select" name="lead_source">
                        <option value="">Select...</option>
                        <option value="inbound" ${c.lead_source === 'inbound' ? 'selected' : ''}>Inbound</option>
                        <option value="outbound" ${c.lead_source === 'outbound' ? 'selected' : ''}>Outbound</option>
                        <option value="referral" ${c.lead_source === 'referral' ? 'selected' : ''}>Referral</option>
                        <option value="partner" ${c.lead_source === 'partner' ? 'selected' : ''}>Partner</option>
                        <option value="website" ${c.lead_source === 'website' ? 'selected' : ''}>Website</option>
                        <option value="claim_listing" ${c.lead_source === 'claim_listing' ? 'selected' : ''}>Claim Listing</option>
                    </select>
                </div>
            </form>`,
            onConfirm: async () => {
                const d = Object.fromEntries(new FormData(document.getElementById('edit-company-form')));
                if (!d.name) { UI.toast('Name required', 'error'); return; }
                const { error } = await db.from('companies').update(d).eq('id', c.id);
                if (error) { UI.toast('Error: ' + error.message, 'error'); return; }
                UI.toast('Company updated');
                UI.closeModal();
                this.showCompanyDetail(c.id);
            }
        });
    },
    
    addContact() {
        UI.toast('Contact picker coming soon');
    }
};

window.Companies = Companies;